   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"forwarding.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.rodata
  19              		.align	2
  22              	rreg_uriquery:
  23 0000 683D7563 		.ascii	"h=ucb\000"
  23      6200
  24 0006 0000     		.align	2
  27              	infoBoardname:
  28 0008 43433235 		.ascii	"CC2538\000"
  28      333800
  29 000f 00       		.align	2
  32              	infouCName:
  33 0010 43433235 		.ascii	"CC2538\000"
  33      333800
  34 0017 00       		.align	2
  37              	infoRadioName:
  38 0018 43433235 		.ascii	"CC2538 SoC\000"
  38      33382053 
  38      6F4300
  39 0023 00       		.align	2
  42              	infoStackName:
  43 0024 4F70656E 		.ascii	"OpenWSN \000"
  43      57534E20 
  43      00
  44 002d 000000   		.align	2
  47              	all_routers_multicast:
  48 0030 FF       		.byte	-1
  49 0031 02       		.byte	2
  50 0032 00       		.byte	0
  51 0033 00       		.byte	0
  52 0034 00       		.byte	0
  53 0035 00       		.byte	0
  54 0036 00       		.byte	0
  55 0037 00       		.byte	0
  56 0038 00       		.byte	0
  57 0039 00       		.byte	0
  58 003a 00       		.byte	0
  59 003b 00       		.byte	0
  60 003c 00       		.byte	0
  61 003d 00       		.byte	0
  62 003e 00       		.byte	0
  63 003f 1A       		.byte	26
  64              		.text
  65              		.align	2
  66              		.global	forwarding_init
  67              		.thumb
  68              		.thumb_func
  70              	forwarding_init:
  71              	.LFB0:
  72              		.file 1 "build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c"
   1:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "opendefs.h"
   2:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "forwarding.h"
   3:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "iphc.h"
   4:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "openqueue.h"
   5:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "openserial.h"
   6:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "idmanager.h"
   7:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "packetfunctions.h"
   8:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "neighbors.h"
   9:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "icmpv6.h"
  10:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "icmpv6rpl.h"
  11:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "openudp.h"
  12:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "opentcp.h"
  13:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "debugpins.h"
  14:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** #include "scheduler.h"
  15:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  16:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** //=========================== variables =======================================
  17:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  18:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** //=========================== prototypes ======================================
  19:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  20:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void      forwarding_getNextHop(
  21:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    open_addr_t*         destination,
  22:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    open_addr_t*         addressToWrite
  23:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** );
  24:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** owerror_t forwarding_send_internal_RoutingTable(
  25:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    OpenQueueEntry_t*    msg,
  26:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    ipv6_header_iht*     ipv6_outer_header,
  27:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    ipv6_header_iht*     ipv6_inner_header,
  28:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    rpl_option_ht*       rpl_option,
  29:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    uint32_t*             flow_label,
  30:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    uint8_t              fw_SendOrfw_Rcv
  31:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** );
  32:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** owerror_t forwarding_send_internal_SourceRouting(
  33:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    OpenQueueEntry_t*    msg,
  34:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    ipv6_header_iht*     ipv6_outer_header,
  35:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    ipv6_header_iht*     ipv6_inner_header,
  36:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    rpl_option_ht*       rpl_option
  37:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** );
  38:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void      forwarding_createRplOption(
  39:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    rpl_option_ht*       rpl_option,
  40:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    uint8_t              flags
  41:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** );
  42:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  43:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  44:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** //=========================== public ==========================================
  45:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  46:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
  47:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Initialize this module.
  48:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
  49:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void forwarding_init() {
  73              		.loc 1 49 0
  74              		.cfi_startproc
  75              		@ args = 0, pretend = 0, frame = 0
  76              		@ frame_needed = 1, uses_anonymous_args = 0
  77              		@ link register save eliminated.
  78 0000 80B4     		push	{r7}
  79              		.cfi_def_cfa_offset 4
  80              		.cfi_offset 7, -4
  81 0002 00AF     		add	r7, sp, #0
  82              		.cfi_def_cfa_register 7
  50:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
  83              		.loc 1 50 0
  84 0004 BD46     		mov	sp, r7
  85              		.cfi_def_cfa_register 13
  86              		@ sp needed
  87 0006 5DF8047B 		ldr	r7, [sp], #4
  88              		.cfi_restore 7
  89              		.cfi_def_cfa_offset 0
  90 000a 7047     		bx	lr
  91              		.cfi_endproc
  92              	.LFE0:
  94              		.align	2
  95              		.global	forwarding_send
  96              		.thumb
  97              		.thumb_func
  99              	forwarding_send:
 100              	.LFB1:
  51:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  52:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
  53:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Send a packet originating at this mote.
  54:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  55:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** This function is called by an upper layer, and only concerns packets originated
  56:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** at this mote.
  57:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  58:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in,out] msg Packet to send.
  59:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
  60:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** owerror_t forwarding_send(OpenQueueEntry_t* msg) {
 101              		.loc 1 60 0
 102              		.cfi_startproc
 103              		@ args = 0, pretend = 0, frame = 248
 104              		@ frame_needed = 1, uses_anonymous_args = 0
 105 000c B0B5     		push	{r4, r5, r7, lr}
 106              		.cfi_def_cfa_offset 16
 107              		.cfi_offset 4, -16
 108              		.cfi_offset 5, -12
 109              		.cfi_offset 7, -8
 110              		.cfi_offset 14, -4
 111 000e CAB0     		sub	sp, sp, #296
 112              		.cfi_def_cfa_offset 312
 113 0010 0CAF     		add	r7, sp, #48
 114              		.cfi_def_cfa 7, 264
 115 0012 7860     		str	r0, [r7, #4]
  61:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_header_iht      ipv6_outer_header;
  62:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_header_iht      ipv6_inner_header;
  63:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option_ht        rpl_option;
  64:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t*         myprefix;
  65:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t*         myadd64;
  66:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint32_t             flow_label = 0;
 116              		.loc 1 66 0
 117 0014 0023     		movs	r3, #0
 118 0016 BB65     		str	r3, [r7, #88]
  67:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  68:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_dest_prefix;
  69:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_dest_mac64b;
  70:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t*         p_dest;
  71:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t*         p_src;  
  72:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_src_prefix;
  73:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_src_mac64b; 
  74:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              sam;
  75:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              m;
  76:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              dam;
  77:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  78:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // take ownership over the packet
  79:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     msg->owner                = COMPONENT_FORWARDING;
 119              		.loc 1 79 0
 120 0018 7B68     		ldr	r3, [r7, #4]
 121 001a 1222     		movs	r2, #18
 122 001c 5A70     		strb	r2, [r3, #1]
  80:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  81:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     m   = IPHC_M_NO;
 123              		.loc 1 81 0
 124 001e 0023     		movs	r3, #0
 125 0020 87F8EE30 		strb	r3, [r7, #238]
  82:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  83:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // retrieve my prefix and EUI64
  84:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     myprefix                  = idmanager_getMyID(ADDR_PREFIX);
 126              		.loc 1 84 0
 127 0024 0520     		movs	r0, #5
 128 0026 FFF7FEFF 		bl	idmanager_getMyID
 129 002a C7F8E800 		str	r0, [r7, #232]
  85:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     myadd64                   = idmanager_getMyID(ADDR_64B);
 130              		.loc 1 85 0
 131 002e 0220     		movs	r0, #2
 132 0030 FFF7FEFF 		bl	idmanager_getMyID
 133 0034 C7F8E400 		str	r0, [r7, #228]
  86:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  87:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // set source address (me)
  88:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     msg->l3_sourceAdd.type=ADDR_128B;
 134              		.loc 1 88 0
 135 0038 7B68     		ldr	r3, [r7, #4]
 136 003a 0322     		movs	r2, #3
 137 003c 83F82620 		strb	r2, [r3, #38]
  89:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&(msg->l3_sourceAdd.addr_128b[0]),myprefix->prefix,8);
 138              		.loc 1 89 0
 139 0040 7B68     		ldr	r3, [r7, #4]
 140 0042 03F12702 		add	r2, r3, #39
 141 0046 D7F8E830 		ldr	r3, [r7, #232]
 142 004a 0133     		adds	r3, r3, #1
 143 004c 1046     		mov	r0, r2
 144 004e 1946     		mov	r1, r3
 145 0050 0822     		movs	r2, #8
 146 0052 FFF7FEFF 		bl	memcpy
  90:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&(msg->l3_sourceAdd.addr_128b[8]),myadd64->addr_64b,8);
 147              		.loc 1 90 0
 148 0056 7B68     		ldr	r3, [r7, #4]
 149 0058 03F12F02 		add	r2, r3, #47
 150 005c D7F8E430 		ldr	r3, [r7, #228]
 151 0060 0133     		adds	r3, r3, #1
 152 0062 1046     		mov	r0, r2
 153 0064 1946     		mov	r1, r3
 154 0066 0822     		movs	r2, #8
 155 0068 FFF7FEFF 		bl	memcpy
  91:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  92:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // initialize IPv6 header
  93:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memset(&ipv6_outer_header,0,sizeof(ipv6_header_iht));
 156              		.loc 1 93 0
 157 006c 07F1A403 		add	r3, r7, #164
 158 0070 1846     		mov	r0, r3
 159 0072 0021     		movs	r1, #0
 160 0074 4022     		movs	r2, #64
 161 0076 FFF7FEFF 		bl	memset
  94:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memset(&ipv6_inner_header,0,sizeof(ipv6_header_iht));
 162              		.loc 1 94 0
 163 007a 07F16403 		add	r3, r7, #100
 164 007e 1846     		mov	r0, r3
 165 0080 0021     		movs	r1, #0
 166 0082 4022     		movs	r2, #64
 167 0084 FFF7FEFF 		bl	memset
  95:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
  96:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // Set hop limit to the default in-network value as this packet is being
  97:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // sent from upper layer. This is done here as send_internal() is used by
  98:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // forwarding of packets as well which carry a hlim. This value is required
  99:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // to be set to a value as the following function can decrement it.
 100:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_inner_header.hop_limit     = IPHC_DEFAULT_HOP_LIMIT;
 168              		.loc 1 100 0
 169 0088 4123     		movs	r3, #65
 170 008a 87F88030 		strb	r3, [r7, #128]
 101:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 102:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // create the RPL hop-by-hop option
 103:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 104:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     forwarding_createRplOption(
 171              		.loc 1 104 0
 172 008e 07F15C03 		add	r3, r7, #92
 173 0092 1846     		mov	r0, r3
 174 0094 0021     		movs	r1, #0
 175 0096 FFF7FEFF 		bl	forwarding_createRplOption
 105:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       &rpl_option,      // rpl_option to fill in
 106:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       0x00              // flags
 107:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     );
 108:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 109:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     packetfunctions_ip128bToMac64b(&(msg->l3_destinationAdd),&temp_dest_prefix,&temp_dest_mac64b);
 176              		.loc 1 109 0
 177 009a 7B68     		ldr	r3, [r7, #4]
 178 009c 03F11501 		add	r1, r3, #21
 179 00a0 07F14402 		add	r2, r7, #68
 180 00a4 07F13003 		add	r3, r7, #48
 181 00a8 0846     		mov	r0, r1
 182 00aa 1146     		mov	r1, r2
 183 00ac 1A46     		mov	r2, r3
 184 00ae FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 110:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     //xv poipoi -- get the src prefix as well
 111:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     packetfunctions_ip128bToMac64b(&(msg->l3_sourceAdd),&temp_src_prefix,&temp_src_mac64b);
 185              		.loc 1 111 0
 186 00b2 7B68     		ldr	r3, [r7, #4]
 187 00b4 03F12601 		add	r1, r3, #38
 188 00b8 07F11C02 		add	r2, r7, #28
 189 00bc 07F10803 		add	r3, r7, #8
 190 00c0 0846     		mov	r0, r1
 191 00c2 1146     		mov	r1, r2
 192 00c4 1A46     		mov	r2, r3
 193 00c6 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 112:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     //XV -poipoi we want to check if the source address prefix is the same as destination prefix
 113:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (packetfunctions_sameAddress(&temp_dest_prefix,&temp_src_prefix)) {
 194              		.loc 1 113 0
 195 00ca 07F14402 		add	r2, r7, #68
 196 00ce 07F11C03 		add	r3, r7, #28
 197 00d2 1046     		mov	r0, r2
 198 00d4 1946     		mov	r1, r3
 199 00d6 FFF7FEFF 		bl	packetfunctions_sameAddress
 200 00da 0346     		mov	r3, r0
 201 00dc 002B     		cmp	r3, #0
 202 00de 0ED0     		beq	.L3
 114:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          // same prefix use 64B address
 115:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          sam = IPHC_SAM_64B;
 203              		.loc 1 115 0
 204 00e0 0123     		movs	r3, #1
 205 00e2 87F8EF30 		strb	r3, [r7, #239]
 116:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          dam = IPHC_DAM_64B;
 206              		.loc 1 116 0
 207 00e6 0123     		movs	r3, #1
 208 00e8 87F8ED30 		strb	r3, [r7, #237]
 117:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          p_dest = &temp_dest_mac64b;      
 209              		.loc 1 117 0
 210 00ec 07F13003 		add	r3, r7, #48
 211 00f0 C7F8F430 		str	r3, [r7, #244]
 118:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          p_src  = &temp_src_mac64b; 
 212              		.loc 1 118 0
 213 00f4 07F10803 		add	r3, r7, #8
 214 00f8 C7F8F030 		str	r3, [r7, #240]
 215 00fc 3EE0     		b	.L4
 216              	.L3:
 119:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 120:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         //not the same prefix. so the packet travels to another network
 121:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         //check if this is a source routing pkt. in case it is then the DAM is elided as it is in t
 122:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (packetfunctions_isBroadcastMulticast(&(msg->l3_destinationAdd))==FALSE){
 217              		.loc 1 122 0
 218 00fe 7B68     		ldr	r3, [r7, #4]
 219 0100 1533     		adds	r3, r3, #21
 220 0102 1846     		mov	r0, r3
 221 0104 FFF7FEFF 		bl	packetfunctions_isBroadcastMulticast
 222 0108 0346     		mov	r3, r0
 223 010a 83F00103 		eor	r3, r3, #1
 224 010e DBB2     		uxtb	r3, r3
 225 0110 002B     		cmp	r3, #0
 226 0112 22D0     		beq	.L5
 123:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             sam = IPHC_SAM_128B;
 227              		.loc 1 123 0
 228 0114 0023     		movs	r3, #0
 229 0116 87F8EF30 		strb	r3, [r7, #239]
 124:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             dam = IPHC_DAM_128B;
 230              		.loc 1 124 0
 231 011a 0023     		movs	r3, #0
 232 011c 87F8ED30 		strb	r3, [r7, #237]
 125:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             p_dest = &(msg->l3_destinationAdd);
 233              		.loc 1 125 0
 234 0120 7B68     		ldr	r3, [r7, #4]
 235 0122 1533     		adds	r3, r3, #21
 236 0124 C7F8F430 		str	r3, [r7, #244]
 126:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             p_src = &(msg->l3_sourceAdd);
 237              		.loc 1 126 0
 238 0128 7B68     		ldr	r3, [r7, #4]
 239 012a 2633     		adds	r3, r3, #38
 240 012c C7F8F030 		str	r3, [r7, #240]
 127:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             
 128:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ipv6_outer_header.src.type = ADDR_128B;
 241              		.loc 1 128 0
 242 0130 0323     		movs	r3, #3
 243 0132 87F8C130 		strb	r3, [r7, #193]
 129:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             memcpy(&ipv6_outer_header.src,p_src,sizeof(open_addr_t));
 244              		.loc 1 129 0
 245 0136 D7F8F020 		ldr	r2, [r7, #240]
 246 013a 07F1C103 		add	r3, r7, #193
 247 013e 1568     		ldr	r5, [r2]	@ unaligned
 248 0140 5468     		ldr	r4, [r2, #4]	@ unaligned
 249 0142 9068     		ldr	r0, [r2, #8]	@ unaligned
 250 0144 D168     		ldr	r1, [r2, #12]	@ unaligned
 251 0146 1D60     		str	r5, [r3]	@ unaligned
 252 0148 5C60     		str	r4, [r3, #4]	@ unaligned
 253 014a 9860     		str	r0, [r3, #8]	@ unaligned
 254 014c D960     		str	r1, [r3, #12]	@ unaligned
 255 014e 127C     		ldrb	r2, [r2, #16]
 256 0150 1A74     		strb	r2, [r3, #16]
 130:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ipv6_outer_header.hop_limit = IPHC_DEFAULT_HOP_LIMIT;
 257              		.loc 1 130 0
 258 0152 4123     		movs	r3, #65
 259 0154 87F8C030 		strb	r3, [r7, #192]
 260 0158 10E0     		b	.L4
 261              	.L5:
 131:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         } else {
 132:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****            // this is DIO, source address elided, multicast bit is set
 133:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             sam = IPHC_SAM_ELIDED;
 262              		.loc 1 133 0
 263 015a 0323     		movs	r3, #3
 264 015c 87F8EF30 		strb	r3, [r7, #239]
 134:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             m   = IPHC_M_YES;
 265              		.loc 1 134 0
 266 0160 0123     		movs	r3, #1
 267 0162 87F8EE30 		strb	r3, [r7, #238]
 135:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             dam = IPHC_DAM_ELIDED;
 268              		.loc 1 135 0
 269 0166 0323     		movs	r3, #3
 270 0168 87F8ED30 		strb	r3, [r7, #237]
 136:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             p_dest = &(msg->l3_destinationAdd);
 271              		.loc 1 136 0
 272 016c 7B68     		ldr	r3, [r7, #4]
 273 016e 1533     		adds	r3, r3, #21
 274 0170 C7F8F430 		str	r3, [r7, #244]
 137:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             p_src = &(msg->l3_sourceAdd);
 275              		.loc 1 137 0
 276 0174 7B68     		ldr	r3, [r7, #4]
 277 0176 2633     		adds	r3, r3, #38
 278 0178 C7F8F030 		str	r3, [r7, #240]
 279              	.L4:
 138:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 139:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 140:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     //IPHC inner header and NHC IPv6 header will be added at here
 141:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     iphc_prependIPv6Header(msg,
 280              		.loc 1 141 0
 281 017c BC6D     		ldr	r4, [r7, #88]
 282 017e 7B68     		ldr	r3, [r7, #4]
 283 0180 597A     		ldrb	r1, [r3, #9]	@ zero_extendqisi2
 284 0182 97F8C020 		ldrb	r2, [r7, #192]	@ zero_extendqisi2
 285 0186 97F8EE30 		ldrb	r3, [r7, #238]	@ zero_extendqisi2
 286 018a 002B     		cmp	r3, #0
 287 018c 14BF     		ite	ne
 288 018e 0123     		movne	r3, #1
 289 0190 0023     		moveq	r3, #0
 290 0192 DBB2     		uxtb	r3, r3
 291 0194 0091     		str	r1, [sp]
 292 0196 0221     		movs	r1, #2
 293 0198 0191     		str	r1, [sp, #4]
 294 019a 0292     		str	r2, [sp, #8]
 295 019c 0022     		movs	r2, #0
 296 019e 0392     		str	r2, [sp, #12]
 297 01a0 0022     		movs	r2, #0
 298 01a2 0492     		str	r2, [sp, #16]
 299 01a4 97F8EF20 		ldrb	r2, [r7, #239]	@ zero_extendqisi2
 300 01a8 0592     		str	r2, [sp, #20]
 301 01aa 0693     		str	r3, [sp, #24]
 302 01ac 0023     		movs	r3, #0
 303 01ae 0793     		str	r3, [sp, #28]
 304 01b0 97F8ED30 		ldrb	r3, [r7, #237]	@ zero_extendqisi2
 305 01b4 0893     		str	r3, [sp, #32]
 306 01b6 D7F8F430 		ldr	r3, [r7, #244]
 307 01ba 0993     		str	r3, [sp, #36]
 308 01bc D7F8F030 		ldr	r3, [r7, #240]
 309 01c0 0A93     		str	r3, [sp, #40]
 310 01c2 0223     		movs	r3, #2
 311 01c4 0B93     		str	r3, [sp, #44]
 312 01c6 7868     		ldr	r0, [r7, #4]
 313 01c8 0321     		movs	r1, #3
 314 01ca 2246     		mov	r2, r4
 315 01cc 0023     		movs	r3, #0
 316 01ce FFF7FEFF 		bl	iphc_prependIPv6Header
 142:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_TF_ELIDED,
 143:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 flow_label, // value_flowlabel
 144:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_NH_INLINE,
 145:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 msg->l4_protocol, 
 146:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_HLIM_64,
 147:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 ipv6_outer_header.hop_limit,
 148:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_CID_NO,
 149:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_SAC_STATELESS,
 150:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 sam,
 151:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 m,
 152:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 IPHC_DAC_STATELESS,
 153:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 dam,
 154:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 p_dest,
 155:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 p_src,            
 156:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 PCKTSEND  
 157:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 );
 158:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // both of them are compressed
 159:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_outer_header.next_header_compressed = TRUE;
 317              		.loc 1 159 0
 318 01d2 0123     		movs	r3, #1
 319 01d4 87F8AC30 		strb	r3, [r7, #172]
 160:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 161:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     return forwarding_send_internal_RoutingTable(
 320              		.loc 1 161 0
 321 01d8 07F1A401 		add	r1, r7, #164
 322 01dc 07F16402 		add	r2, r7, #100
 323 01e0 07F15C04 		add	r4, r7, #92
 324 01e4 07F15803 		add	r3, r7, #88
 325 01e8 0093     		str	r3, [sp]
 326 01ea 0223     		movs	r3, #2
 327 01ec 0193     		str	r3, [sp, #4]
 328 01ee 7868     		ldr	r0, [r7, #4]
 329 01f0 2346     		mov	r3, r4
 330 01f2 FFF7FEFF 		bl	forwarding_send_internal_RoutingTable
 331 01f6 0346     		mov	r3, r0
 162:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         msg,
 163:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &ipv6_outer_header,
 164:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &ipv6_inner_header,
 165:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &rpl_option,
 166:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &flow_label,
 167:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         PCKTSEND
 168:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     );
 169:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 332              		.loc 1 169 0
 333 01f8 1846     		mov	r0, r3
 334 01fa F837     		adds	r7, r7, #248
 335              		.cfi_def_cfa_offset 16
 336 01fc BD46     		mov	sp, r7
 337              		.cfi_def_cfa_register 13
 338              		@ sp needed
 339 01fe B0BD     		pop	{r4, r5, r7, pc}
 340              		.cfi_endproc
 341              	.LFE1:
 343              		.align	2
 344              		.global	forwarding_sendDone
 345              		.thumb
 346              		.thumb_func
 348              	forwarding_sendDone:
 349              	.LFB2:
 170:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 171:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 172:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Indicates a packet has been sent.
 173:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 174:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in,out] msg   The packet just sent.
 175:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     error The outcome of sending it.
 176:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 177:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void forwarding_sendDone(OpenQueueEntry_t* msg, owerror_t error) {
 350              		.loc 1 177 0
 351              		.cfi_startproc
 352              		@ args = 0, pretend = 0, frame = 8
 353              		@ frame_needed = 1, uses_anonymous_args = 0
 354 0200 80B5     		push	{r7, lr}
 355              		.cfi_def_cfa_offset 8
 356              		.cfi_offset 7, -8
 357              		.cfi_offset 14, -4
 358 0202 82B0     		sub	sp, sp, #8
 359              		.cfi_def_cfa_offset 16
 360 0204 00AF     		add	r7, sp, #0
 361              		.cfi_def_cfa_register 7
 362 0206 7860     		str	r0, [r7, #4]
 363 0208 0B46     		mov	r3, r1
 364 020a FB70     		strb	r3, [r7, #3]
 178:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 179:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    // take ownership
 180:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    msg->owner = COMPONENT_FORWARDING;
 365              		.loc 1 180 0
 366 020c 7B68     		ldr	r3, [r7, #4]
 367 020e 1222     		movs	r2, #18
 368 0210 5A70     		strb	r2, [r3, #1]
 181:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 182:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    if (msg->creator==COMPONENT_RADIO || msg->creator==COMPONENT_FORWARDING) {
 369              		.loc 1 182 0
 370 0212 7B68     		ldr	r3, [r7, #4]
 371 0214 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 372 0216 072B     		cmp	r3, #7
 373 0218 03D0     		beq	.L8
 374              		.loc 1 182 0 is_stmt 0 discriminator 1
 375 021a 7B68     		ldr	r3, [r7, #4]
 376 021c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 377 021e 122B     		cmp	r3, #18
 378 0220 03D1     		bne	.L9
 379              	.L8:
 183:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // this is a relayed packet
 184:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       
 185:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // free packet
 186:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       openqueue_freePacketBuffer(msg);
 380              		.loc 1 186 0 is_stmt 1
 381 0222 7868     		ldr	r0, [r7, #4]
 382 0224 FFF7FEFF 		bl	openqueue_freePacketBuffer
 383 0228 25E0     		b	.L7
 384              	.L9:
 187:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    } else {
 188:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // this is a packet created by this mote
 189:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       
 190:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // indicate sendDone to upper layer
 191:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       switch(msg->l4_protocol) {
 385              		.loc 1 191 0
 386 022a 7B68     		ldr	r3, [r7, #4]
 387 022c 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 388 022e 112B     		cmp	r3, #17
 389 0230 09D0     		beq	.L12
 390 0232 3A2B     		cmp	r3, #58
 391 0234 0DD0     		beq	.L13
 392 0236 062B     		cmp	r3, #6
 393 0238 11D1     		bne	.L15
 192:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          case IANA_TCP:
 193:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             opentcp_sendDone(msg,error);
 394              		.loc 1 193 0
 395 023a FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 396 023c 7868     		ldr	r0, [r7, #4]
 397 023e 1946     		mov	r1, r3
 398 0240 FFF7FEFF 		bl	opentcp_sendDone
 194:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 399              		.loc 1 194 0
 400 0244 17E0     		b	.L7
 401              	.L12:
 195:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          case IANA_UDP:
 196:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openudp_sendDone(msg,error);
 402              		.loc 1 196 0
 403 0246 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 404 0248 7868     		ldr	r0, [r7, #4]
 405 024a 1946     		mov	r1, r3
 406 024c FFF7FEFF 		bl	openudp_sendDone
 197:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 407              		.loc 1 197 0
 408 0250 11E0     		b	.L7
 409              	.L13:
 198:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          case IANA_ICMPv6:
 199:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             icmpv6_sendDone(msg,error);
 410              		.loc 1 199 0
 411 0252 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 412 0254 7868     		ldr	r0, [r7, #4]
 413 0256 1946     		mov	r1, r3
 414 0258 FFF7FEFF 		bl	icmpv6_sendDone
 200:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 415              		.loc 1 200 0
 416 025c 0BE0     		b	.L7
 417              	.L15:
 201:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          default:
 202:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             
 203:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // log error
 204:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openserial_printCritical(
 205:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                COMPONENT_FORWARDING,
 206:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                ERR_WRONG_TRAN_PROTOCOL,
 207:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                (errorparameter_t)msg->l4_protocol,
 418              		.loc 1 207 0
 419 025e 7B68     		ldr	r3, [r7, #4]
 420 0260 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 204:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                COMPONENT_FORWARDING,
 421              		.loc 1 204 0
 422 0262 9BB2     		uxth	r3, r3
 423 0264 1220     		movs	r0, #18
 424 0266 0621     		movs	r1, #6
 425 0268 1A46     		mov	r2, r3
 426 026a 0023     		movs	r3, #0
 427 026c FFF7FEFF 		bl	openserial_printCritical
 208:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                (errorparameter_t)0
 209:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             );
 210:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             
 211:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // free packet
 212:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openqueue_freePacketBuffer(msg);
 428              		.loc 1 212 0
 429 0270 7868     		ldr	r0, [r7, #4]
 430 0272 FFF7FEFF 		bl	openqueue_freePacketBuffer
 431              	.L7:
 213:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       }
 214:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    }
 215:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 432              		.loc 1 215 0
 433 0276 0837     		adds	r7, r7, #8
 434              		.cfi_def_cfa_offset 8
 435 0278 BD46     		mov	sp, r7
 436              		.cfi_def_cfa_register 13
 437              		@ sp needed
 438 027a 80BD     		pop	{r7, pc}
 439              		.cfi_endproc
 440              	.LFE2:
 442              		.align	2
 443              		.global	forwarding_receive
 444              		.thumb
 445              		.thumb_func
 447              	forwarding_receive:
 448              	.LFB3:
 216:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 217:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 218:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Indicates a packet was received.
 219:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 220:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in,out] msg               The packet just sent.
 221:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     ipv6_header       The information contained in the IPv6 header.
 222:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     ipv6_hop_header   The hop-by-hop header present in the packet.
 223:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     rpl_option        The hop-by-hop options present in the packet.
 224:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 225:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void forwarding_receive(
 226:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       OpenQueueEntry_t*      msg,
 227:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_header_iht*       ipv6_outer_header,
 228:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_header_iht*       ipv6_inner_header,
 229:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       rpl_option_ht*         rpl_option
 230:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ) {
 449              		.loc 1 230 0
 450              		.cfi_startproc
 451              		@ args = 0, pretend = 0, frame = 24
 452              		@ frame_needed = 1, uses_anonymous_args = 0
 453 027c 90B5     		push	{r4, r7, lr}
 454              		.cfi_def_cfa_offset 12
 455              		.cfi_offset 4, -12
 456              		.cfi_offset 7, -8
 457              		.cfi_offset 14, -4
 458 027e 89B0     		sub	sp, sp, #36
 459              		.cfi_def_cfa_offset 48
 460 0280 02AF     		add	r7, sp, #8
 461              		.cfi_def_cfa 7, 40
 462 0282 F860     		str	r0, [r7, #12]
 463 0284 B960     		str	r1, [r7, #8]
 464 0286 7A60     		str	r2, [r7, #4]
 465 0288 3B60     		str	r3, [r7]
 231:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t flags;
 232:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint16_t senderRank;
 233:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 234:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // take ownership
 235:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     msg->owner                     = COMPONENT_FORWARDING;
 466              		.loc 1 235 0
 467 028a FB68     		ldr	r3, [r7, #12]
 468 028c 1222     		movs	r2, #18
 469 028e 5A70     		strb	r2, [r3, #1]
 236:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 237:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // determine L4 protocol
 238:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // get information from ipv6_header
 239:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     msg->l4_protocol            = ipv6_inner_header->next_header;
 470              		.loc 1 239 0
 471 0290 7B68     		ldr	r3, [r7, #4]
 472 0292 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 473 0294 FB68     		ldr	r3, [r7, #12]
 474 0296 5A72     		strb	r2, [r3, #9]
 240:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     msg->l4_protocol_compressed = ipv6_inner_header->next_header_compressed;
 475              		.loc 1 240 0
 476 0298 7B68     		ldr	r3, [r7, #4]
 477 029a 1A7A     		ldrb	r2, [r3, #8]	@ zero_extendqisi2
 478 029c FB68     		ldr	r3, [r7, #12]
 479 029e 9A72     		strb	r2, [r3, #10]
 241:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 242:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // populate packets metadata with L3 information
 243:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&(msg->l3_destinationAdd),&ipv6_inner_header->dest, sizeof(open_addr_t));
 480              		.loc 1 243 0
 481 02a0 FB68     		ldr	r3, [r7, #12]
 482 02a2 03F11502 		add	r2, r3, #21
 483 02a6 7B68     		ldr	r3, [r7, #4]
 484 02a8 2E33     		adds	r3, r3, #46
 485 02aa 1046     		mov	r0, r2
 486 02ac 1946     		mov	r1, r3
 487 02ae 1122     		movs	r2, #17
 488 02b0 FFF7FEFF 		bl	memcpy
 244:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&(msg->l3_sourceAdd),     &ipv6_inner_header->src,  sizeof(open_addr_t));
 489              		.loc 1 244 0
 490 02b4 FB68     		ldr	r3, [r7, #12]
 491 02b6 03F12602 		add	r2, r3, #38
 492 02ba 7B68     		ldr	r3, [r7, #4]
 493 02bc 1D33     		adds	r3, r3, #29
 494 02be 1046     		mov	r0, r2
 495 02c0 1946     		mov	r1, r3
 496 02c2 1122     		movs	r2, #17
 497 02c4 FFF7FEFF 		bl	memcpy
 245:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 246:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (
 247:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         (
 248:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             idmanager_isMyAddress(&(msg->l3_destinationAdd))
 498              		.loc 1 248 0
 499 02c8 FB68     		ldr	r3, [r7, #12]
 500 02ca 1533     		adds	r3, r3, #21
 501 02cc 1846     		mov	r0, r3
 502 02ce FFF7FEFF 		bl	idmanager_isMyAddress
 503 02d2 0346     		mov	r3, r0
 246:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         (
 504              		.loc 1 246 0
 505 02d4 002B     		cmp	r3, #0
 506 02d6 07D1     		bne	.L17
 249:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ||
 250:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             packetfunctions_isBroadcastMulticast(&(msg->l3_destinationAdd))
 507              		.loc 1 250 0
 508 02d8 FB68     		ldr	r3, [r7, #12]
 509 02da 1533     		adds	r3, r3, #21
 510 02dc 1846     		mov	r0, r3
 511 02de FFF7FEFF 		bl	packetfunctions_isBroadcastMulticast
 512 02e2 0346     		mov	r3, r0
 249:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ||
 513              		.loc 1 249 0
 514 02e4 002B     		cmp	r3, #0
 515 02e6 37D0     		beq	.L18
 516              	.L17:
 251:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         )
 252:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &&
 253:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->next_header!=IANA_IPv6ROUTE
 517              		.loc 1 253 0
 518 02e8 BB68     		ldr	r3, [r7, #8]
 519 02ea 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 252:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->next_header!=IANA_IPv6ROUTE
 520              		.loc 1 252 0
 521 02ec 2B2B     		cmp	r3, #43
 522 02ee 33D0     		beq	.L18
 254:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ) {
 255:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (ipv6_outer_header->src.type != ADDR_NONE){
 523              		.loc 1 255 0
 524 02f0 BB68     		ldr	r3, [r7, #8]
 525 02f2 5B7F     		ldrb	r3, [r3, #29]	@ zero_extendqisi2
 526 02f4 002B     		cmp	r3, #0
 527 02f6 06D0     		beq	.L19
 256:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             packetfunctions_tossHeader(msg,ipv6_outer_header->header_length);
 528              		.loc 1 256 0
 529 02f8 BB68     		ldr	r3, [r7, #8]
 530 02fa 93F83F30 		ldrb	r3, [r3, #63]	@ zero_extendqisi2
 531 02fe F868     		ldr	r0, [r7, #12]
 532 0300 1946     		mov	r1, r3
 533 0302 FFF7FEFF 		bl	packetfunctions_tossHeader
 534              	.L19:
 257:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 258:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // this packet is for me, no source routing header // toss iphc inner header
 259:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_tossHeader(msg,ipv6_inner_header->header_length);
 535              		.loc 1 259 0
 536 0306 7B68     		ldr	r3, [r7, #4]
 537 0308 93F83F30 		ldrb	r3, [r3, #63]	@ zero_extendqisi2
 538 030c F868     		ldr	r0, [r7, #12]
 539 030e 1946     		mov	r1, r3
 540 0310 FFF7FEFF 		bl	packetfunctions_tossHeader
 260:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // indicate received packet to upper layer
 261:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         switch(msg->l4_protocol) {
 541              		.loc 1 261 0
 542 0314 FB68     		ldr	r3, [r7, #12]
 543 0316 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 544 0318 112B     		cmp	r3, #17
 545 031a 07D0     		beq	.L21
 546 031c 3A2B     		cmp	r3, #58
 547 031e 09D0     		beq	.L22
 548 0320 062B     		cmp	r3, #6
 549 0322 0BD1     		bne	.L30
 262:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         case IANA_TCP:
 263:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             opentcp_receive(msg);
 550              		.loc 1 263 0
 551 0324 F868     		ldr	r0, [r7, #12]
 552 0326 FFF7FEFF 		bl	opentcp_receive
 264:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 553              		.loc 1 264 0
 554 032a 14E0     		b	.L24
 555              	.L21:
 265:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         case IANA_UDP:
 266:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openudp_receive(msg);
 556              		.loc 1 266 0
 557 032c F868     		ldr	r0, [r7, #12]
 558 032e FFF7FEFF 		bl	openudp_receive
 267:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 559              		.loc 1 267 0
 560 0332 10E0     		b	.L24
 561              	.L22:
 268:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         case IANA_ICMPv6:
 269:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             icmpv6_receive(msg);
 562              		.loc 1 269 0
 563 0334 F868     		ldr	r0, [r7, #12]
 564 0336 FFF7FEFF 		bl	icmpv6_receive
 270:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             break;
 565              		.loc 1 270 0
 566 033a 0CE0     		b	.L24
 567              	.L30:
 271:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         default:
 272:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // log error
 273:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openserial_printError(
 274:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 COMPONENT_FORWARDING,ERR_WRONG_TRAN_PROTOCOL,
 275:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t)msg->l4_protocol,
 568              		.loc 1 275 0
 569 033c FB68     		ldr	r3, [r7, #12]
 570 033e 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 273:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 COMPONENT_FORWARDING,ERR_WRONG_TRAN_PROTOCOL,
 571              		.loc 1 273 0
 572 0340 9BB2     		uxth	r3, r3
 573 0342 1220     		movs	r0, #18
 574 0344 0621     		movs	r1, #6
 575 0346 1A46     		mov	r2, r3
 576 0348 0123     		movs	r3, #1
 577 034a FFF7FEFF 		bl	openserial_printError
 276:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t)1
 277:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             );
 278:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             
 279:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // free packet
 280:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openqueue_freePacketBuffer(msg);
 578              		.loc 1 280 0
 579 034e F868     		ldr	r0, [r7, #12]
 580 0350 FFF7FEFF 		bl	openqueue_freePacketBuffer
 281:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 282:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 581              		.loc 1 282 0
 582 0354 5CE0     		b	.L16
 583              	.L24:
 584 0356 5BE0     		b	.L16
 585              	.L18:
 283:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // this packet is not for me: relay
 284:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       
 285:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // change the creator of the packet
 286:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         msg->creator = COMPONENT_FORWARDING;
 586              		.loc 1 286 0
 587 0358 FB68     		ldr	r3, [r7, #12]
 588 035a 1222     		movs	r2, #18
 589 035c 1A70     		strb	r2, [r3]
 287:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       
 288:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (ipv6_outer_header->next_header!=IANA_IPv6ROUTE) {
 590              		.loc 1 288 0
 591 035e BB68     		ldr	r3, [r7, #8]
 592 0360 5B7A     		ldrb	r3, [r3, #9]	@ zero_extendqisi2
 593 0362 2B2B     		cmp	r3, #43
 594 0364 45D0     		beq	.L26
 289:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             flags = rpl_option->flags;
 595              		.loc 1 289 0
 596 0366 3B68     		ldr	r3, [r7]
 597 0368 5B78     		ldrb	r3, [r3, #1]
 598 036a FB75     		strb	r3, [r7, #23]
 290:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             senderRank = rpl_option->senderRank;
 599              		.loc 1 290 0
 600 036c 3B68     		ldr	r3, [r7]
 601 036e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 602 0370 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 603 0372 1B02     		lsls	r3, r3, #8
 604 0374 1343     		orrs	r3, r3, r2
 605 0376 BB82     		strh	r3, [r7, #20]	@ movhi
 291:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if ((flags & O_FLAG)!=0){
 606              		.loc 1 291 0
 607 0378 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 608 037a 03F01003 		and	r3, r3, #16
 609 037e 002B     		cmp	r3, #0
 610 0380 06D0     		beq	.L27
 292:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // wrong direction
 293:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // log error
 294:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 openserial_printError(
 611              		.loc 1 294 0
 612 0382 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 613 0384 9AB2     		uxth	r2, r3
 614 0386 BB8A     		ldrh	r3, [r7, #20]
 615 0388 1220     		movs	r0, #18
 616 038a 1321     		movs	r1, #19
 617 038c FFF7FEFF 		bl	openserial_printError
 618              	.L27:
 295:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     COMPONENT_FORWARDING,
 296:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ERR_WRONG_DIRECTION,
 297:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t)flags,
 298:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t)senderRank
 299:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 );
 300:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 301:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if (senderRank < neighbors_getMyDAGrank()){
 619              		.loc 1 301 0
 620 0390 FFF7FEFF 		bl	neighbors_getMyDAGrank
 621 0394 0346     		mov	r3, r0
 622 0396 1A46     		mov	r2, r3
 623 0398 BB8A     		ldrh	r3, [r7, #20]
 624 039a 9342     		cmp	r3, r2
 625 039c 11D2     		bcs	.L28
 302:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // loop detected
 303:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // set flag
 304:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 rpl_option->flags |= R_FLAG;
 626              		.loc 1 304 0
 627 039e 3B68     		ldr	r3, [r7]
 628 03a0 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 629 03a2 43F00803 		orr	r3, r3, #8
 630 03a6 DAB2     		uxtb	r2, r3
 631 03a8 3B68     		ldr	r3, [r7]
 632 03aa 5A70     		strb	r2, [r3, #1]
 305:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // log error
 306:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 openserial_printError(
 633              		.loc 1 306 0
 634 03ac FFF7FEFF 		bl	neighbors_getMyDAGrank
 635 03b0 0346     		mov	r3, r0
 636 03b2 1C46     		mov	r4, r3
 637 03b4 BB8A     		ldrh	r3, [r7, #20]
 638 03b6 1220     		movs	r0, #18
 639 03b8 1221     		movs	r1, #18
 640 03ba 1A46     		mov	r2, r3
 641 03bc 2346     		mov	r3, r4
 642 03be FFF7FEFF 		bl	openserial_printError
 643              	.L28:
 307:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     COMPONENT_FORWARDING,
 308:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ERR_LOOP_DETECTED,
 309:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t) senderRank,
 310:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t) neighbors_getMyDAGrank()
 311:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 );
 312:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 313:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             forwarding_createRplOption(rpl_option, rpl_option->flags);
 644              		.loc 1 313 0
 645 03c2 3B68     		ldr	r3, [r7]
 646 03c4 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 647 03c6 3868     		ldr	r0, [r7]
 648 03c8 1946     		mov	r1, r3
 649 03ca FFF7FEFF 		bl	forwarding_createRplOption
 314:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // resend as if from upper layer
 315:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if (
 316:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 forwarding_send_internal_RoutingTable(
 650              		.loc 1 316 0
 651 03ce BB68     		ldr	r3, [r7, #8]
 652 03d0 0433     		adds	r3, r3, #4
 653 03d2 0093     		str	r3, [sp]
 654 03d4 0123     		movs	r3, #1
 655 03d6 0193     		str	r3, [sp, #4]
 656 03d8 F868     		ldr	r0, [r7, #12]
 657 03da B968     		ldr	r1, [r7, #8]
 658 03dc 7A68     		ldr	r2, [r7, #4]
 659 03de 3B68     		ldr	r3, [r7]
 660 03e0 FFF7FEFF 		bl	forwarding_send_internal_RoutingTable
 661 03e4 0346     		mov	r3, r0
 315:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 forwarding_send_internal_RoutingTable(
 662              		.loc 1 315 0
 663 03e6 012B     		cmp	r3, #1
 664 03e8 12D1     		bne	.L16
 317:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     msg,
 318:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ipv6_outer_header,
 319:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ipv6_inner_header,
 320:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     rpl_option,
 321:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     &(ipv6_outer_header->flow_label),
 322:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     PCKTFORWARD 
 323:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 )==E_FAIL
 324:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ) {
 325:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 openqueue_freePacketBuffer(msg);
 665              		.loc 1 325 0
 666 03ea F868     		ldr	r0, [r7, #12]
 667 03ec FFF7FEFF 		bl	openqueue_freePacketBuffer
 668 03f0 0EE0     		b	.L16
 669              	.L26:
 326:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 327:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         } else {
 328:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // source routing header present
 329:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if (
 330:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 forwarding_send_internal_SourceRouting(
 670              		.loc 1 330 0
 671 03f2 F868     		ldr	r0, [r7, #12]
 672 03f4 B968     		ldr	r1, [r7, #8]
 673 03f6 7A68     		ldr	r2, [r7, #4]
 674 03f8 3B68     		ldr	r3, [r7]
 675 03fa FFF7FEFF 		bl	forwarding_send_internal_SourceRouting
 676 03fe 0346     		mov	r3, r0
 329:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 forwarding_send_internal_SourceRouting(
 677              		.loc 1 329 0
 678 0400 012B     		cmp	r3, #1
 679 0402 05D1     		bne	.L16
 331:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     msg,
 332:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ipv6_outer_header,
 333:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ipv6_inner_header,
 334:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     rpl_option
 335:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 )==E_FAIL
 336:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ) {
 337:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // log error
 338:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 openserial_printError(
 680              		.loc 1 338 0
 681 0404 1220     		movs	r0, #18
 682 0406 0F21     		movs	r1, #15
 683 0408 0022     		movs	r2, #0
 684 040a 0023     		movs	r3, #0
 685 040c FFF7FEFF 		bl	openserial_printError
 686              	.L16:
 339:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     COMPONENT_FORWARDING,
 340:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     ERR_INVALID_FWDMODE,
 341:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t)0,
 342:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     (errorparameter_t)0
 343:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 );
 344:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 345:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 346:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 347:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 687              		.loc 1 347 0
 688 0410 1C37     		adds	r7, r7, #28
 689              		.cfi_def_cfa_offset 12
 690 0412 BD46     		mov	sp, r7
 691              		.cfi_def_cfa_register 13
 692              		@ sp needed
 693 0414 90BD     		pop	{r4, r7, pc}
 694              		.cfi_endproc
 695              	.LFE3:
 697 0416 00BF     		.align	2
 698              		.global	forwarding_getNextHop
 699              		.thumb
 700              		.thumb_func
 702              	forwarding_getNextHop:
 703              	.LFB4:
 348:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 349:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** //=========================== private =========================================
 350:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 351:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 352:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Retrieve the next hop's address from routing table.
 353:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 354:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]  destination128b  Final IPv6 destination address.
 355:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[out] addressToWrite64b Location to write the EUI64 of next hop to.
 356:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 357:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void forwarding_getNextHop(open_addr_t* destination128b, open_addr_t* addressToWrite64b) {
 704              		.loc 1 357 0
 705              		.cfi_startproc
 706              		@ args = 0, pretend = 0, frame = 32
 707              		@ frame_needed = 1, uses_anonymous_args = 0
 708 0418 80B5     		push	{r7, lr}
 709              		.cfi_def_cfa_offset 8
 710              		.cfi_offset 7, -8
 711              		.cfi_offset 14, -4
 712 041a 88B0     		sub	sp, sp, #32
 713              		.cfi_def_cfa_offset 40
 714 041c 00AF     		add	r7, sp, #0
 715              		.cfi_def_cfa_register 7
 716 041e 7860     		str	r0, [r7, #4]
 717 0420 3960     		str	r1, [r7]
 358:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    uint8_t         i;
 359:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    open_addr_t     temp_prefix64btoWrite;
 360:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 361:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    if (packetfunctions_isBroadcastMulticast(destination128b)) {
 718              		.loc 1 361 0
 719 0422 7868     		ldr	r0, [r7, #4]
 720 0424 FFF7FEFF 		bl	packetfunctions_isBroadcastMulticast
 721 0428 0346     		mov	r3, r0
 722 042a 002B     		cmp	r3, #0
 723 042c 11D0     		beq	.L32
 362:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // IP destination is broadcast, send to 0xffffffffffffffff
 363:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       addressToWrite64b->type = ADDR_64B;
 724              		.loc 1 363 0
 725 042e 3B68     		ldr	r3, [r7]
 726 0430 0222     		movs	r2, #2
 727 0432 1A70     		strb	r2, [r3]
 364:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       for (i=0;i<8;i++) {
 728              		.loc 1 364 0
 729 0434 0023     		movs	r3, #0
 730 0436 FB77     		strb	r3, [r7, #31]
 731 0438 07E0     		b	.L33
 732              	.L34:
 365:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          addressToWrite64b->addr_64b[i] = 0xff;
 733              		.loc 1 365 0 discriminator 3
 734 043a FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 735 043c 3A68     		ldr	r2, [r7]
 736 043e 1344     		add	r3, r3, r2
 737 0440 FF22     		movs	r2, #255
 738 0442 5A70     		strb	r2, [r3, #1]
 364:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       for (i=0;i<8;i++) {
 739              		.loc 1 364 0 discriminator 3
 740 0444 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 741 0446 0133     		adds	r3, r3, #1
 742 0448 FB77     		strb	r3, [r7, #31]
 743              	.L33:
 364:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       for (i=0;i<8;i++) {
 744              		.loc 1 364 0 is_stmt 0 discriminator 1
 745 044a FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 746 044c 072B     		cmp	r3, #7
 747 044e F4D9     		bls	.L34
 748 0450 10E0     		b	.L31
 749              	.L32:
 366:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       }
 367:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    } else if (neighbors_isStableNeighbor(destination128b)) {
 750              		.loc 1 367 0 is_stmt 1
 751 0452 7868     		ldr	r0, [r7, #4]
 752 0454 FFF7FEFF 		bl	neighbors_isStableNeighbor
 753 0458 0346     		mov	r3, r0
 754 045a 002B     		cmp	r3, #0
 755 045c 07D0     		beq	.L36
 368:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // IP destination is 1-hop neighbor, send directly
 369:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       packetfunctions_ip128bToMac64b(destination128b,&temp_prefix64btoWrite,addressToWrite64b);
 756              		.loc 1 369 0
 757 045e 07F10C03 		add	r3, r7, #12
 758 0462 7868     		ldr	r0, [r7, #4]
 759 0464 1946     		mov	r1, r3
 760 0466 3A68     		ldr	r2, [r7]
 761 0468 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 762 046c 02E0     		b	.L31
 763              	.L36:
 370:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    } else {
 371:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       // destination is remote, send to preferred parent
 372:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       neighbors_getPreferredParentEui64(addressToWrite64b);
 764              		.loc 1 372 0
 765 046e 3868     		ldr	r0, [r7]
 766 0470 FFF7FEFF 		bl	neighbors_getPreferredParentEui64
 767              	.L31:
 373:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    }
 374:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 768              		.loc 1 374 0
 769 0474 2037     		adds	r7, r7, #32
 770              		.cfi_def_cfa_offset 8
 771 0476 BD46     		mov	sp, r7
 772              		.cfi_def_cfa_register 13
 773              		@ sp needed
 774 0478 80BD     		pop	{r7, pc}
 775              		.cfi_endproc
 776              	.LFE4:
 778 047a 00BF     		.align	2
 779              		.global	forwarding_send_internal_RoutingTable
 780              		.thumb
 781              		.thumb_func
 783              	forwarding_send_internal_RoutingTable:
 784              	.LFB5:
 375:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 376:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 377:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Send a packet using the routing table to find the next hop.
 378:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 379:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in,out] msg             The packet to send.
 380:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     ipv6_header     The packet's IPv6 header.
 381:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     rpl_option      The hop-by-hop option to add in this packet.
 382:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     flow_label      The flowlabel to add in the 6LoWPAN header.
 383:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     fw_SendOrfw_Rcv The packet is originating from this mote
 384:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    (PCKTSEND), or forwarded (PCKTFORWARD).
 385:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 386:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** owerror_t forwarding_send_internal_RoutingTable(
 387:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       OpenQueueEntry_t*      msg,
 388:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_header_iht*       ipv6_outer_header,
 389:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_header_iht*       ipv6_inner_header,
 390:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       rpl_option_ht*         rpl_option,
 391:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       uint32_t*              flow_label,
 392:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       uint8_t                fw_SendOrfw_Rcv
 393:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    ) {
 785              		.loc 1 393 0
 786              		.cfi_startproc
 787              		@ args = 8, pretend = 0, frame = 16
 788              		@ frame_needed = 1, uses_anonymous_args = 0
 789 047c 80B5     		push	{r7, lr}
 790              		.cfi_def_cfa_offset 8
 791              		.cfi_offset 7, -8
 792              		.cfi_offset 14, -4
 793 047e 88B0     		sub	sp, sp, #32
 794              		.cfi_def_cfa_offset 40
 795 0480 04AF     		add	r7, sp, #16
 796              		.cfi_def_cfa 7, 24
 797 0482 F860     		str	r0, [r7, #12]
 798 0484 B960     		str	r1, [r7, #8]
 799 0486 7A60     		str	r2, [r7, #4]
 800 0488 3B60     		str	r3, [r7]
 394:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 395:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    // retrieve the next hop from the routing table
 396:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    forwarding_getNextHop(&(msg->l3_destinationAdd),&(msg->l2_nextORpreviousHop));
 801              		.loc 1 396 0
 802 048a FB68     		ldr	r3, [r7, #12]
 803 048c 03F11502 		add	r2, r3, #21
 804 0490 FB68     		ldr	r3, [r7, #12]
 805 0492 3833     		adds	r3, r3, #56
 806 0494 1046     		mov	r0, r2
 807 0496 1946     		mov	r1, r3
 808 0498 FFF7FEFF 		bl	forwarding_getNextHop
 397:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    if (msg->l2_nextORpreviousHop.type==ADDR_NONE) {
 809              		.loc 1 397 0
 810 049c FB68     		ldr	r3, [r7, #12]
 811 049e 93F83830 		ldrb	r3, [r3, #56]	@ zero_extendqisi2
 812 04a2 002B     		cmp	r3, #0
 813 04a4 07D1     		bne	.L38
 398:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       openserial_printError(
 814              		.loc 1 398 0
 815 04a6 1220     		movs	r0, #18
 816 04a8 0D21     		movs	r1, #13
 817 04aa 0022     		movs	r2, #0
 818 04ac 0023     		movs	r3, #0
 819 04ae FFF7FEFF 		bl	openserial_printError
 399:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          COMPONENT_FORWARDING,
 400:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          ERR_NO_NEXTHOP,
 401:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          (errorparameter_t)0,
 402:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****          (errorparameter_t)0
 403:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       );
 404:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       return E_FAIL;
 820              		.loc 1 404 0
 821 04b2 0123     		movs	r3, #1
 822 04b4 19E0     		b	.L39
 823              	.L38:
 405:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    }
 406:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 407:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    if (ipv6_outer_header->src.type != ADDR_NONE){
 824              		.loc 1 407 0
 825 04b6 BB68     		ldr	r3, [r7, #8]
 826 04b8 5B7F     		ldrb	r3, [r3, #29]	@ zero_extendqisi2
 827 04ba 002B     		cmp	r3, #0
 828 04bc 06D0     		beq	.L40
 408:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       packetfunctions_tossHeader(msg,ipv6_outer_header->header_length);
 829              		.loc 1 408 0
 830 04be BB68     		ldr	r3, [r7, #8]
 831 04c0 93F83F30 		ldrb	r3, [r3, #63]	@ zero_extendqisi2
 832 04c4 F868     		ldr	r0, [r7, #12]
 833 04c6 1946     		mov	r1, r3
 834 04c8 FFF7FEFF 		bl	packetfunctions_tossHeader
 835              	.L40:
 409:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    }
 410:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 411:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    // send to next lower layer
 412:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    return iphc_sendFromForwarding(
 836              		.loc 1 412 0
 837 04cc BB69     		ldr	r3, [r7, #24]
 838 04ce 0093     		str	r3, [sp]
 839 04d0 0023     		movs	r3, #0
 840 04d2 0193     		str	r3, [sp, #4]
 841 04d4 0023     		movs	r3, #0
 842 04d6 0293     		str	r3, [sp, #8]
 843 04d8 3B7F     		ldrb	r3, [r7, #28]	@ zero_extendqisi2
 844 04da 0393     		str	r3, [sp, #12]
 845 04dc F868     		ldr	r0, [r7, #12]
 846 04de B968     		ldr	r1, [r7, #8]
 847 04e0 7A68     		ldr	r2, [r7, #4]
 848 04e2 3B68     		ldr	r3, [r7]
 849 04e4 FFF7FEFF 		bl	iphc_sendFromForwarding
 850 04e8 0346     		mov	r3, r0
 851              	.L39:
 413:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       msg,
 414:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_outer_header,
 415:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       ipv6_inner_header,
 416:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       rpl_option,
 417:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       flow_label,
 418:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       NULL,  // no rh3
 419:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       0,
 420:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       fw_SendOrfw_Rcv
 421:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    );
 422:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 852              		.loc 1 422 0
 853 04ea 1846     		mov	r0, r3
 854 04ec 1037     		adds	r7, r7, #16
 855              		.cfi_def_cfa_offset 8
 856 04ee BD46     		mov	sp, r7
 857              		.cfi_def_cfa_register 13
 858              		@ sp needed
 859 04f0 80BD     		pop	{r7, pc}
 860              		.cfi_endproc
 861              	.LFE5:
 863 04f2 00BF     		.align	2
 864              		.global	forwarding_send_internal_SourceRouting
 865              		.thumb
 866              		.thumb_func
 868              	forwarding_send_internal_SourceRouting:
 869              	.LFB6:
 423:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 424:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 425:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Send a packet using the source rout to find the next hop.
 426:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 427:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \note This is always called for packets being forwarded.
 428:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 429:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** How to process the routing header is detailed in
 430:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** http://tools.ietf.org/html/rfc6554#page-9.
 431:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 432:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in,out] msg             The packet to send.
 433:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]     ipv6_header     The packet's IPv6 header.
 434:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 435:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** owerror_t forwarding_send_internal_SourceRouting(
 436:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     OpenQueueEntry_t* msg,
 437:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_header_iht*  ipv6_outer_header,
 438:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ipv6_header_iht*  ipv6_inner_header,
 439:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option_ht*    rpl_option
 440:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ) {
 870              		.loc 1 440 0
 871              		.cfi_startproc
 872              		@ args = 0, pretend = 0, frame = 240
 873              		@ frame_needed = 1, uses_anonymous_args = 0
 874 04f4 B0B5     		push	{r4, r5, r7, lr}
 875              		.cfi_def_cfa_offset 16
 876              		.cfi_offset 4, -16
 877              		.cfi_offset 5, -12
 878              		.cfi_offset 7, -8
 879              		.cfi_offset 14, -4
 880 04f6 C0B0     		sub	sp, sp, #256
 881              		.cfi_def_cfa_offset 272
 882 04f8 04AF     		add	r7, sp, #16
 883              		.cfi_def_cfa 7, 256
 884 04fa F860     		str	r0, [r7, #12]
 885 04fc B960     		str	r1, [r7, #8]
 886 04fe 7A60     		str	r2, [r7, #4]
 887 0500 3B60     		str	r3, [r7]
 441:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              temp_8b;
 442:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              type;
 443:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              next_type;
 444:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              size;
 445:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              next_size;
 446:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              hlen;
 447:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          firstAddr;
 448:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          nextAddr;
 449:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_prefix;
 450:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     open_addr_t          temp_addr64;
 451:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 452:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              rpi_length;
 453:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              flags;
 454:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint16_t             senderRank;
 455:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 456:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              RH3_copy[127];
 457:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t              RH3_length;
 458:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 459:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memset(&RH3_copy[0],0,127);
 888              		.loc 1 459 0
 889 0502 07F11403 		add	r3, r7, #20
 890 0506 1846     		mov	r0, r3
 891 0508 0021     		movs	r1, #0
 892 050a 7F22     		movs	r2, #127
 893 050c FFF7FEFF 		bl	memset
 460:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     RH3_length = 0;
 894              		.loc 1 460 0
 895 0510 0023     		movs	r3, #0
 896 0512 87F8EE30 		strb	r3, [r7, #238]
 461:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&msg->l3_destinationAdd,&ipv6_inner_header->dest,sizeof(open_addr_t));
 897              		.loc 1 461 0
 898 0516 FB68     		ldr	r3, [r7, #12]
 899 0518 03F11502 		add	r2, r3, #21
 900 051c 7B68     		ldr	r3, [r7, #4]
 901 051e 2E33     		adds	r3, r3, #46
 902 0520 1046     		mov	r0, r2
 903 0522 1946     		mov	r1, r3
 904 0524 1122     		movs	r2, #17
 905 0526 FFF7FEFF 		bl	memcpy
 462:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     memcpy(&msg->l3_sourceAdd,&ipv6_inner_header->src,sizeof(open_addr_t));
 906              		.loc 1 462 0
 907 052a FB68     		ldr	r3, [r7, #12]
 908 052c 03F12602 		add	r2, r3, #38
 909 0530 7B68     		ldr	r3, [r7, #4]
 910 0532 1D33     		adds	r3, r3, #29
 911 0534 1046     		mov	r0, r2
 912 0536 1946     		mov	r1, r3
 913 0538 1122     		movs	r2, #17
 914 053a FFF7FEFF 		bl	memcpy
 463:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 464:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // initial first Address by compression reference
 465:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     firstAddr.type = ADDR_128B;
 915              		.loc 1 465 0
 916 053e 0323     		movs	r3, #3
 917 0540 87F8D030 		strb	r3, [r7, #208]
 466:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (ipv6_outer_header->src.type != ADDR_NONE){
 918              		.loc 1 466 0
 919 0544 BB68     		ldr	r3, [r7, #8]
 920 0546 5B7F     		ldrb	r3, [r3, #29]	@ zero_extendqisi2
 921 0548 002B     		cmp	r3, #0
 922 054a 0AD0     		beq	.L42
 467:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (rpl_option->rplInstanceID == 0){
 923              		.loc 1 467 0
 924 054c 3B68     		ldr	r3, [r7]
 925 054e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 926 0550 002B     		cmp	r3, #0
 927 0552 12D1     		bne	.L44
 468:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             icmpv6rpl_getRPLDODAGid(&firstAddr.addr_128b[0]);
 928              		.loc 1 468 0
 929 0554 07F1D003 		add	r3, r7, #208
 930 0558 0133     		adds	r3, r3, #1
 931 055a 1846     		mov	r0, r3
 932 055c FFF7FEFF 		bl	icmpv6rpl_getRPLDODAGid
 933 0560 0BE0     		b	.L44
 934              	.L42:
 469:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 470:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 471:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr,&ipv6_inner_header->src,sizeof(open_addr_t));
 935              		.loc 1 471 0
 936 0562 7B68     		ldr	r3, [r7, #4]
 937 0564 07F1D004 		add	r4, r7, #208
 938 0568 03F11D05 		add	r5, r3, #29
 939 056c 2868     		ldr	r0, [r5]	@ unaligned
 940 056e 6968     		ldr	r1, [r5, #4]	@ unaligned
 941 0570 AA68     		ldr	r2, [r5, #8]	@ unaligned
 942 0572 EB68     		ldr	r3, [r5, #12]	@ unaligned
 943 0574 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 944 0576 2B7C     		ldrb	r3, [r5, #16]
 945 0578 2370     		strb	r3, [r4]
 946              	.L44:
 472:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 473:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 474:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     hlen = 0;
 947              		.loc 1 474 0
 948 057a 0023     		movs	r3, #0
 949 057c 87F8EF30 		strb	r3, [r7, #239]
 475:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 476:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     temp_8b = *((uint8_t*)(msg->payload)+hlen);
 950              		.loc 1 476 0
 951 0580 FB68     		ldr	r3, [r7, #12]
 952 0582 5A68     		ldr	r2, [r3, #4]
 953 0584 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 954 0588 1344     		add	r3, r3, r2
 955 058a 1B78     		ldrb	r3, [r3]
 956 058c 87F8ED30 		strb	r3, [r7, #237]
 477:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     type    = *((uint8_t*)(msg->payload)+hlen+1);
 957              		.loc 1 477 0
 958 0590 FB68     		ldr	r3, [r7, #12]
 959 0592 5A68     		ldr	r2, [r3, #4]
 960 0594 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 961 0598 0133     		adds	r3, r3, #1
 962 059a 1344     		add	r3, r3, r2
 963 059c 1B78     		ldrb	r3, [r3]
 964 059e 87F8EC30 		strb	r3, [r7, #236]
 478:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 479:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     hlen += 2;
 965              		.loc 1 479 0
 966 05a2 97F8EF30 		ldrb	r3, [r7, #239]
 967 05a6 0233     		adds	r3, r3, #2
 968 05a8 87F8EF30 		strb	r3, [r7, #239]
 480:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // get the first address
 481:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     switch(type){
 969              		.loc 1 481 0
 970 05ac 97F8EC30 		ldrb	r3, [r7, #236]	@ zero_extendqisi2
 971 05b0 042B     		cmp	r3, #4
 972 05b2 67D8     		bhi	.L45
 973 05b4 01A2     		adr	r2, .L47
 974 05b6 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 975 05ba 00BF     		.p2align 2
 976              	.L47:
 977 05bc D1050000 		.word	.L46+1
 978 05c0 ED050000 		.word	.L48+1
 979 05c4 13060000 		.word	.L49+1
 980 05c8 39060000 		.word	.L50+1
 981 05cc 5F060000 		.word	.L51+1
 982              		.p2align 1
 983              	.L46:
 482:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     case RH3_6LOTH_TYPE_0:
 483:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr.addr_128b[15],msg->payload+hlen,1);
 984              		.loc 1 483 0
 985 05d0 FB68     		ldr	r3, [r7, #12]
 986 05d2 5A68     		ldr	r2, [r3, #4]
 987 05d4 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 988 05d8 1344     		add	r3, r3, r2
 989 05da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 990 05dc 87F8E030 		strb	r3, [r7, #224]
 484:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         hlen += 1;
 991              		.loc 1 484 0
 992 05e0 97F8EF30 		ldrb	r3, [r7, #239]
 993 05e4 0133     		adds	r3, r3, #1
 994 05e6 87F8EF30 		strb	r3, [r7, #239]
 485:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         break;
 995              		.loc 1 485 0
 996 05ea 4BE0     		b	.L45
 997              	.L48:
 486:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     case RH3_6LOTH_TYPE_1:
 487:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr.addr_128b[14],msg->payload+hlen,2);
 998              		.loc 1 487 0
 999 05ec FB68     		ldr	r3, [r7, #12]
 1000 05ee 5A68     		ldr	r2, [r3, #4]
 1001 05f0 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1002 05f4 1A44     		add	r2, r2, r3
 1003 05f6 07F1D003 		add	r3, r7, #208
 1004 05fa 0F33     		adds	r3, r3, #15
 1005 05fc 1846     		mov	r0, r3
 1006 05fe 1146     		mov	r1, r2
 1007 0600 0222     		movs	r2, #2
 1008 0602 FFF7FEFF 		bl	memcpy
 488:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         hlen += 2;
 1009              		.loc 1 488 0
 1010 0606 97F8EF30 		ldrb	r3, [r7, #239]
 1011 060a 0233     		adds	r3, r3, #2
 1012 060c 87F8EF30 		strb	r3, [r7, #239]
 489:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         break;
 1013              		.loc 1 489 0
 1014 0610 38E0     		b	.L45
 1015              	.L49:
 490:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     case RH3_6LOTH_TYPE_2:
 491:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr.addr_128b[12],msg->payload+hlen,4);
 1016              		.loc 1 491 0
 1017 0612 FB68     		ldr	r3, [r7, #12]
 1018 0614 5A68     		ldr	r2, [r3, #4]
 1019 0616 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1020 061a 1A44     		add	r2, r2, r3
 1021 061c 07F1D003 		add	r3, r7, #208
 1022 0620 0D33     		adds	r3, r3, #13
 1023 0622 1846     		mov	r0, r3
 1024 0624 1146     		mov	r1, r2
 1025 0626 0422     		movs	r2, #4
 1026 0628 FFF7FEFF 		bl	memcpy
 492:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         hlen += 4;
 1027              		.loc 1 492 0
 1028 062c 97F8EF30 		ldrb	r3, [r7, #239]
 1029 0630 0433     		adds	r3, r3, #4
 1030 0632 87F8EF30 		strb	r3, [r7, #239]
 493:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         break;
 1031              		.loc 1 493 0
 1032 0636 25E0     		b	.L45
 1033              	.L50:
 494:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     case RH3_6LOTH_TYPE_3:
 495:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr.addr_128b[8],msg->payload+hlen,8);
 1034              		.loc 1 495 0
 1035 0638 FB68     		ldr	r3, [r7, #12]
 1036 063a 5A68     		ldr	r2, [r3, #4]
 1037 063c 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1038 0640 1A44     		add	r2, r2, r3
 1039 0642 07F1D003 		add	r3, r7, #208
 1040 0646 0933     		adds	r3, r3, #9
 1041 0648 1846     		mov	r0, r3
 1042 064a 1146     		mov	r1, r2
 1043 064c 0822     		movs	r2, #8
 1044 064e FFF7FEFF 		bl	memcpy
 496:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         hlen += 8;
 1045              		.loc 1 496 0
 1046 0652 97F8EF30 		ldrb	r3, [r7, #239]
 1047 0656 0833     		adds	r3, r3, #8
 1048 0658 87F8EF30 		strb	r3, [r7, #239]
 497:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         break;
 1049              		.loc 1 497 0
 1050 065c 12E0     		b	.L45
 1051              	.L51:
 498:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     case RH3_6LOTH_TYPE_4:
 499:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&firstAddr.addr_128b[0],msg->payload+hlen,16);
 1052              		.loc 1 499 0
 1053 065e FB68     		ldr	r3, [r7, #12]
 1054 0660 5A68     		ldr	r2, [r3, #4]
 1055 0662 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1056 0666 1A44     		add	r2, r2, r3
 1057 0668 07F1D003 		add	r3, r7, #208
 1058 066c 0133     		adds	r3, r3, #1
 1059 066e 1846     		mov	r0, r3
 1060 0670 1146     		mov	r1, r2
 1061 0672 1022     		movs	r2, #16
 1062 0674 FFF7FEFF 		bl	memcpy
 500:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         hlen += 16;
 1063              		.loc 1 500 0
 1064 0678 97F8EF30 		ldrb	r3, [r7, #239]
 1065 067c 1033     		adds	r3, r3, #16
 1066 067e 87F8EF30 		strb	r3, [r7, #239]
 501:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         break;
 1067              		.loc 1 501 0
 1068 0682 00BF     		nop
 1069              	.L45:
 502:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 503:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 504:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     packetfunctions_ip128bToMac64b(&firstAddr,&temp_prefix,&temp_addr64);
 1070              		.loc 1 504 0
 1071 0684 07F1D001 		add	r1, r7, #208
 1072 0688 07F1A802 		add	r2, r7, #168
 1073 068c 07F19403 		add	r3, r7, #148
 1074 0690 0846     		mov	r0, r1
 1075 0692 1146     		mov	r1, r2
 1076 0694 1A46     		mov	r2, r3
 1077 0696 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 505:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (
 506:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_sameAddress(&temp_prefix,idmanager_getMyID(ADDR_PREFIX)) &&
 1078              		.loc 1 506 0
 1079 069a 0520     		movs	r0, #5
 1080 069c FFF7FEFF 		bl	idmanager_getMyID
 1081 06a0 0246     		mov	r2, r0
 1082 06a2 07F1A803 		add	r3, r7, #168
 1083 06a6 1846     		mov	r0, r3
 1084 06a8 1146     		mov	r1, r2
 1085 06aa FFF7FEFF 		bl	packetfunctions_sameAddress
 1086 06ae 0346     		mov	r3, r0
 505:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (
 1087              		.loc 1 505 0
 1088 06b0 002B     		cmp	r3, #0
 1089 06b2 00F02182 		beq	.L52
 507:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_sameAddress(&temp_addr64,idmanager_getMyID(ADDR_64B))
 1090              		.loc 1 507 0
 1091 06b6 0220     		movs	r0, #2
 1092 06b8 FFF7FEFF 		bl	idmanager_getMyID
 1093 06bc 0246     		mov	r2, r0
 1094 06be 07F19403 		add	r3, r7, #148
 1095 06c2 1846     		mov	r0, r3
 1096 06c4 1146     		mov	r1, r2
 1097 06c6 FFF7FEFF 		bl	packetfunctions_sameAddress
 1098 06ca 0346     		mov	r3, r0
 506:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_sameAddress(&temp_addr64,idmanager_getMyID(ADDR_64B))
 1099              		.loc 1 506 0
 1100 06cc 002B     		cmp	r3, #0
 1101 06ce 00F01382 		beq	.L52
 508:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ){
 509:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         size = temp_8b & RH3_6LOTH_SIZE_MASK;
 1102              		.loc 1 509 0
 1103 06d2 97F8ED30 		ldrb	r3, [r7, #237]
 1104 06d6 03F01F03 		and	r3, r3, #31
 1105 06da 87F8EB30 		strb	r3, [r7, #235]
 510:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (size > 0){
 1106              		.loc 1 510 0
 1107 06de 97F8EB30 		ldrb	r3, [r7, #235]	@ zero_extendqisi2
 1108 06e2 002B     		cmp	r3, #0
 1109 06e4 79D0     		beq	.L53
 511:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // there are at least 2 entries in the header, 
 512:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // the router removes the first entry and decrements the Size (by 1) 
 513:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             size -= 1;
 1110              		.loc 1 513 0
 1111 06e6 97F8EB30 		ldrb	r3, [r7, #235]
 1112 06ea 013B     		subs	r3, r3, #1
 1113 06ec 87F8EB30 		strb	r3, [r7, #235]
 514:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             packetfunctions_tossHeader(msg,hlen);
 1114              		.loc 1 514 0
 1115 06f0 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1116 06f4 F868     		ldr	r0, [r7, #12]
 1117 06f6 1946     		mov	r1, r3
 1118 06f8 FFF7FEFF 		bl	packetfunctions_tossHeader
 515:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             packetfunctions_reserveHeaderSize(msg,2);
 1119              		.loc 1 515 0
 1120 06fc F868     		ldr	r0, [r7, #12]
 1121 06fe 0221     		movs	r1, #2
 1122 0700 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 516:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             msg->payload[0] = CRITICAL_6LORH | size;
 1123              		.loc 1 516 0
 1124 0704 FB68     		ldr	r3, [r7, #12]
 1125 0706 5B68     		ldr	r3, [r3, #4]
 1126 0708 97F8EB20 		ldrb	r2, [r7, #235]
 1127 070c 62F07F02 		orn	r2, r2, #127
 1128 0710 D2B2     		uxtb	r2, r2
 1129 0712 1A70     		strb	r2, [r3]
 517:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             msg->payload[1] = type;
 1130              		.loc 1 517 0
 1131 0714 FB68     		ldr	r3, [r7, #12]
 1132 0716 5B68     		ldr	r3, [r3, #4]
 1133 0718 0133     		adds	r3, r3, #1
 1134 071a 97F8EC20 		ldrb	r2, [r7, #236]
 1135 071e 1A70     		strb	r2, [r3]
 518:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // get next hop
 519:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             memcpy(&nextAddr,&firstAddr,sizeof(open_addr_t));
 1136              		.loc 1 519 0
 1137 0720 07F1BC04 		add	r4, r7, #188
 1138 0724 07F1D005 		add	r5, r7, #208
 1139 0728 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 1140 072a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 1141 072c 2B68     		ldr	r3, [r5]
 1142 072e 2370     		strb	r3, [r4]
 520:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             switch(type){
 1143              		.loc 1 520 0
 1144 0730 97F8EC30 		ldrb	r3, [r7, #236]	@ zero_extendqisi2
 1145 0734 042B     		cmp	r3, #4
 1146 0736 44D8     		bhi	.L54
 1147 0738 01A2     		adr	r2, .L56
 1148 073a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1149 073e 00BF     		.p2align 2
 1150              	.L56:
 1151 0740 55070000 		.word	.L55+1
 1152 0744 63070000 		.word	.L57+1
 1153 0748 7B070000 		.word	.L58+1
 1154 074c 93070000 		.word	.L59+1
 1155 0750 AB070000 		.word	.L60+1
 1156              		.p2align 1
 1157              	.L55:
 521:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             case RH3_6LOTH_TYPE_0:
 522:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 memcpy(&nextAddr.addr_128b[15],msg->payload+2,1);
 1158              		.loc 1 522 0
 1159 0754 FB68     		ldr	r3, [r7, #12]
 1160 0756 5B68     		ldr	r3, [r3, #4]
 1161 0758 0233     		adds	r3, r3, #2
 1162 075a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1163 075c 87F8CC30 		strb	r3, [r7, #204]
 523:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 break;
 1164              		.loc 1 523 0
 1165 0760 2FE0     		b	.L54
 1166              	.L57:
 524:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             case RH3_6LOTH_TYPE_1:
 525:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 memcpy(&nextAddr.addr_128b[14],msg->payload+2,2);
 1167              		.loc 1 525 0
 1168 0762 FB68     		ldr	r3, [r7, #12]
 1169 0764 5B68     		ldr	r3, [r3, #4]
 1170 0766 9A1C     		adds	r2, r3, #2
 1171 0768 07F1BC03 		add	r3, r7, #188
 1172 076c 0F33     		adds	r3, r3, #15
 1173 076e 1846     		mov	r0, r3
 1174 0770 1146     		mov	r1, r2
 1175 0772 0222     		movs	r2, #2
 1176 0774 FFF7FEFF 		bl	memcpy
 526:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 break;
 1177              		.loc 1 526 0
 1178 0778 23E0     		b	.L54
 1179              	.L58:
 527:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             case RH3_6LOTH_TYPE_2:
 528:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 memcpy(&nextAddr.addr_128b[12],msg->payload+2,4);
 1180              		.loc 1 528 0
 1181 077a FB68     		ldr	r3, [r7, #12]
 1182 077c 5B68     		ldr	r3, [r3, #4]
 1183 077e 9A1C     		adds	r2, r3, #2
 1184 0780 07F1BC03 		add	r3, r7, #188
 1185 0784 0D33     		adds	r3, r3, #13
 1186 0786 1846     		mov	r0, r3
 1187 0788 1146     		mov	r1, r2
 1188 078a 0422     		movs	r2, #4
 1189 078c FFF7FEFF 		bl	memcpy
 529:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 break;
 1190              		.loc 1 529 0
 1191 0790 17E0     		b	.L54
 1192              	.L59:
 530:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             case RH3_6LOTH_TYPE_3:
 531:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 memcpy(&nextAddr.addr_128b[8],msg->payload+2,8);
 1193              		.loc 1 531 0
 1194 0792 FB68     		ldr	r3, [r7, #12]
 1195 0794 5B68     		ldr	r3, [r3, #4]
 1196 0796 9A1C     		adds	r2, r3, #2
 1197 0798 07F1BC03 		add	r3, r7, #188
 1198 079c 0933     		adds	r3, r3, #9
 1199 079e 1846     		mov	r0, r3
 1200 07a0 1146     		mov	r1, r2
 1201 07a2 0822     		movs	r2, #8
 1202 07a4 FFF7FEFF 		bl	memcpy
 532:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 break;
 1203              		.loc 1 532 0
 1204 07a8 0BE0     		b	.L54
 1205              	.L60:
 533:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             case RH3_6LOTH_TYPE_4:
 534:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 memcpy(&nextAddr.addr_128b[0],msg->payload+2,16);
 1206              		.loc 1 534 0
 1207 07aa FB68     		ldr	r3, [r7, #12]
 1208 07ac 5B68     		ldr	r3, [r3, #4]
 1209 07ae 9A1C     		adds	r2, r3, #2
 1210 07b0 07F1BC03 		add	r3, r7, #188
 1211 07b4 0133     		adds	r3, r3, #1
 1212 07b6 1846     		mov	r0, r3
 1213 07b8 1146     		mov	r1, r2
 1214 07ba 1022     		movs	r2, #16
 1215 07bc FFF7FEFF 		bl	memcpy
 535:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 break;
 1216              		.loc 1 535 0
 1217 07c0 00BF     		nop
 1218              	.L54:
 536:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 537:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             packetfunctions_ip128bToMac64b(
 1219              		.loc 1 537 0
 1220 07c2 FB68     		ldr	r3, [r7, #12]
 1221 07c4 3833     		adds	r3, r3, #56
 1222 07c6 07F1BC01 		add	r1, r7, #188
 1223 07ca 07F1A802 		add	r2, r7, #168
 1224 07ce 0846     		mov	r0, r1
 1225 07d0 1146     		mov	r1, r2
 1226 07d2 1A46     		mov	r2, r3
 1227 07d4 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 1228 07d8 8DE1     		b	.L61
 1229              	.L53:
 538:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 &nextAddr,
 539:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 &temp_prefix,
 540:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 &msg->l2_nextORpreviousHop
 541:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             );
 542:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         } else {
 543:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             temp_8b   = *((uint8_t*)(msg->payload)+hlen);
 1230              		.loc 1 543 0
 1231 07da FB68     		ldr	r3, [r7, #12]
 1232 07dc 5A68     		ldr	r2, [r3, #4]
 1233 07de 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1234 07e2 1344     		add	r3, r3, r2
 1235 07e4 1B78     		ldrb	r3, [r3]
 1236 07e6 87F8ED30 		strb	r3, [r7, #237]
 544:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             next_type = *((uint8_t*)(msg->payload)+hlen+1);
 1237              		.loc 1 544 0
 1238 07ea FB68     		ldr	r3, [r7, #12]
 1239 07ec 5A68     		ldr	r2, [r3, #4]
 1240 07ee 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1241 07f2 0133     		adds	r3, r3, #1
 1242 07f4 1344     		add	r3, r3, r2
 1243 07f6 1B78     		ldrb	r3, [r3]
 1244 07f8 87F8EA30 		strb	r3, [r7, #234]
 545:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if (
 546:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (temp_8b & FORMAT_6LORH_MASK) == CRITICAL_6LORH &&
 1245              		.loc 1 546 0
 1246 07fc 97F8ED30 		ldrb	r3, [r7, #237]	@ zero_extendqisi2
 1247 0800 03F0E003 		and	r3, r3, #224
 545:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             if (
 1248              		.loc 1 545 0
 1249 0804 802B     		cmp	r3, #128
 1250 0806 40F06381 		bne	.L62
 1251              		.loc 1 546 0
 1252 080a 97F8EA30 		ldrb	r3, [r7, #234]	@ zero_extendqisi2
 1253 080e 042B     		cmp	r3, #4
 1254 0810 00F25E81 		bhi	.L62
 547:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 next_type<=RH3_6LOTH_TYPE_4
 548:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ) {
 549:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // there is another RH3-6LoRH following, check the type
 550:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 if (next_type >= type){
 1255              		.loc 1 550 0
 1256 0814 97F8EA20 		ldrb	r2, [r7, #234]	@ zero_extendqisi2
 1257 0818 97F8EC30 		ldrb	r3, [r7, #236]	@ zero_extendqisi2
 1258 081c 9A42     		cmp	r2, r3
 1259 081e 62D3     		bcc	.L63
 551:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_tossHeader(msg,hlen);
 1260              		.loc 1 551 0
 1261 0820 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1262 0824 F868     		ldr	r0, [r7, #12]
 1263 0826 1946     		mov	r1, r3
 1264 0828 FFF7FEFF 		bl	packetfunctions_tossHeader
 552:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     // get next hop
 553:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     memcpy(&nextAddr,&firstAddr,sizeof(open_addr_t));
 1265              		.loc 1 553 0
 1266 082c 07F1BC04 		add	r4, r7, #188
 1267 0830 07F1D005 		add	r5, r7, #208
 1268 0834 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 1269 0836 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 1270 0838 2B68     		ldr	r3, [r5]
 1271 083a 2370     		strb	r3, [r4]
 554:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     switch(next_type){
 1272              		.loc 1 554 0
 1273 083c 97F8EA30 		ldrb	r3, [r7, #234]	@ zero_extendqisi2
 1274 0840 042B     		cmp	r3, #4
 1275 0842 44D8     		bhi	.L64
 1276 0844 01A2     		adr	r2, .L66
 1277 0846 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1278 084a 00BF     		.p2align 2
 1279              	.L66:
 1280 084c 61080000 		.word	.L65+1
 1281 0850 6F080000 		.word	.L67+1
 1282 0854 87080000 		.word	.L68+1
 1283 0858 9F080000 		.word	.L69+1
 1284 085c B7080000 		.word	.L70+1
 1285              		.p2align 1
 1286              	.L65:
 555:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_0:
 556:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&nextAddr.addr_128b[15],msg->payload+2,1);
 1287              		.loc 1 556 0
 1288 0860 FB68     		ldr	r3, [r7, #12]
 1289 0862 5B68     		ldr	r3, [r3, #4]
 1290 0864 0233     		adds	r3, r3, #2
 1291 0866 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1292 0868 87F8CC30 		strb	r3, [r7, #204]
 557:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1293              		.loc 1 557 0
 1294 086c 2FE0     		b	.L64
 1295              	.L67:
 558:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_1:
 559:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&nextAddr.addr_128b[14],msg->payload+2,2);
 1296              		.loc 1 559 0
 1297 086e FB68     		ldr	r3, [r7, #12]
 1298 0870 5B68     		ldr	r3, [r3, #4]
 1299 0872 9A1C     		adds	r2, r3, #2
 1300 0874 07F1BC03 		add	r3, r7, #188
 1301 0878 0F33     		adds	r3, r3, #15
 1302 087a 1846     		mov	r0, r3
 1303 087c 1146     		mov	r1, r2
 1304 087e 0222     		movs	r2, #2
 1305 0880 FFF7FEFF 		bl	memcpy
 560:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1306              		.loc 1 560 0
 1307 0884 23E0     		b	.L64
 1308              	.L68:
 561:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_2:
 562:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&nextAddr.addr_128b[12],msg->payload+2,4);
 1309              		.loc 1 562 0
 1310 0886 FB68     		ldr	r3, [r7, #12]
 1311 0888 5B68     		ldr	r3, [r3, #4]
 1312 088a 9A1C     		adds	r2, r3, #2
 1313 088c 07F1BC03 		add	r3, r7, #188
 1314 0890 0D33     		adds	r3, r3, #13
 1315 0892 1846     		mov	r0, r3
 1316 0894 1146     		mov	r1, r2
 1317 0896 0422     		movs	r2, #4
 1318 0898 FFF7FEFF 		bl	memcpy
 563:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1319              		.loc 1 563 0
 1320 089c 17E0     		b	.L64
 1321              	.L69:
 564:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_3:
 565:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&nextAddr.addr_128b[8],msg->payload+2,8);
 1322              		.loc 1 565 0
 1323 089e FB68     		ldr	r3, [r7, #12]
 1324 08a0 5B68     		ldr	r3, [r3, #4]
 1325 08a2 9A1C     		adds	r2, r3, #2
 1326 08a4 07F1BC03 		add	r3, r7, #188
 1327 08a8 0933     		adds	r3, r3, #9
 1328 08aa 1846     		mov	r0, r3
 1329 08ac 1146     		mov	r1, r2
 1330 08ae 0822     		movs	r2, #8
 1331 08b0 FFF7FEFF 		bl	memcpy
 566:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1332              		.loc 1 566 0
 1333 08b4 0BE0     		b	.L64
 1334              	.L70:
 567:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_4:
 568:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&nextAddr.addr_128b[0],msg->payload+2,16);
 1335              		.loc 1 568 0
 1336 08b6 FB68     		ldr	r3, [r7, #12]
 1337 08b8 5B68     		ldr	r3, [r3, #4]
 1338 08ba 9A1C     		adds	r2, r3, #2
 1339 08bc 07F1BC03 		add	r3, r7, #188
 1340 08c0 0133     		adds	r3, r3, #1
 1341 08c2 1846     		mov	r0, r3
 1342 08c4 1146     		mov	r1, r2
 1343 08c6 1022     		movs	r2, #16
 1344 08c8 FFF7FEFF 		bl	memcpy
 569:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1345              		.loc 1 569 0
 1346 08cc 00BF     		nop
 1347              	.L64:
 570:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     }
 571:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_ip128bToMac64b(
 1348              		.loc 1 571 0
 1349 08ce FB68     		ldr	r3, [r7, #12]
 1350 08d0 3833     		adds	r3, r3, #56
 1351 08d2 07F1BC01 		add	r1, r7, #188
 1352 08d6 07F1A802 		add	r2, r7, #168
 1353 08da 0846     		mov	r0, r1
 1354 08dc 1146     		mov	r1, r2
 1355 08de 1A46     		mov	r2, r3
 1356 08e0 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 550:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_tossHeader(msg,hlen);
 1357              		.loc 1 550 0
 1358 08e4 07E1     		b	.L61
 1359              	.L63:
 572:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &nextAddr,
 573:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &temp_prefix,
 574:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &msg->l2_nextORpreviousHop
 575:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     );
 576:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 } else {
 577:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     hlen += 2;
 1360              		.loc 1 577 0
 1361 08e6 97F8EF30 		ldrb	r3, [r7, #239]
 1362 08ea 0233     		adds	r3, r3, #2
 1363 08ec 87F8EF30 		strb	r3, [r7, #239]
 578:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     switch(next_type){
 1364              		.loc 1 578 0
 1365 08f0 97F8EA30 		ldrb	r3, [r7, #234]	@ zero_extendqisi2
 1366 08f4 032B     		cmp	r3, #3
 1367 08f6 52D8     		bhi	.L72
 1368 08f8 01A2     		adr	r2, .L74
 1369 08fa 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1370 08fe 00BF     		.p2align 2
 1371              	.L74:
 1372 0900 11090000 		.word	.L73+1
 1373 0904 2D090000 		.word	.L75+1
 1374 0908 53090000 		.word	.L76+1
 1375 090c 79090000 		.word	.L77+1
 1376              		.p2align 1
 1377              	.L73:
 579:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_0:
 580:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&firstAddr.addr_128b[15],msg->payload+hlen,1);
 1378              		.loc 1 580 0
 1379 0910 FB68     		ldr	r3, [r7, #12]
 1380 0912 5A68     		ldr	r2, [r3, #4]
 1381 0914 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1382 0918 1344     		add	r3, r3, r2
 1383 091a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1384 091c 87F8E030 		strb	r3, [r7, #224]
 581:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         hlen += 1;
 1385              		.loc 1 581 0
 1386 0920 97F8EF30 		ldrb	r3, [r7, #239]
 1387 0924 0133     		adds	r3, r3, #1
 1388 0926 87F8EF30 		strb	r3, [r7, #239]
 582:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1389              		.loc 1 582 0
 1390 092a 38E0     		b	.L72
 1391              	.L75:
 583:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_1:
 584:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&firstAddr.addr_128b[14],msg->payload+hlen,2);
 1392              		.loc 1 584 0
 1393 092c FB68     		ldr	r3, [r7, #12]
 1394 092e 5A68     		ldr	r2, [r3, #4]
 1395 0930 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1396 0934 1A44     		add	r2, r2, r3
 1397 0936 07F1D003 		add	r3, r7, #208
 1398 093a 0F33     		adds	r3, r3, #15
 1399 093c 1846     		mov	r0, r3
 1400 093e 1146     		mov	r1, r2
 1401 0940 0222     		movs	r2, #2
 1402 0942 FFF7FEFF 		bl	memcpy
 585:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         hlen += 2;
 1403              		.loc 1 585 0
 1404 0946 97F8EF30 		ldrb	r3, [r7, #239]
 1405 094a 0233     		adds	r3, r3, #2
 1406 094c 87F8EF30 		strb	r3, [r7, #239]
 586:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1407              		.loc 1 586 0
 1408 0950 25E0     		b	.L72
 1409              	.L76:
 587:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_2:
 588:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&firstAddr.addr_128b[12],msg->payload+hlen,4);
 1410              		.loc 1 588 0
 1411 0952 FB68     		ldr	r3, [r7, #12]
 1412 0954 5A68     		ldr	r2, [r3, #4]
 1413 0956 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1414 095a 1A44     		add	r2, r2, r3
 1415 095c 07F1D003 		add	r3, r7, #208
 1416 0960 0D33     		adds	r3, r3, #13
 1417 0962 1846     		mov	r0, r3
 1418 0964 1146     		mov	r1, r2
 1419 0966 0422     		movs	r2, #4
 1420 0968 FFF7FEFF 		bl	memcpy
 589:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         hlen += 4;
 1421              		.loc 1 589 0
 1422 096c 97F8EF30 		ldrb	r3, [r7, #239]
 1423 0970 0433     		adds	r3, r3, #4
 1424 0972 87F8EF30 		strb	r3, [r7, #239]
 590:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1425              		.loc 1 590 0
 1426 0976 12E0     		b	.L72
 1427              	.L77:
 591:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_3:
 592:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&firstAddr.addr_128b[8],msg->payload+hlen,8);
 1428              		.loc 1 592 0
 1429 0978 FB68     		ldr	r3, [r7, #12]
 1430 097a 5A68     		ldr	r2, [r3, #4]
 1431 097c 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1432 0980 1A44     		add	r2, r2, r3
 1433 0982 07F1D003 		add	r3, r7, #208
 1434 0986 0933     		adds	r3, r3, #9
 1435 0988 1846     		mov	r0, r3
 1436 098a 1146     		mov	r1, r2
 1437 098c 0822     		movs	r2, #8
 1438 098e FFF7FEFF 		bl	memcpy
 593:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         hlen += 8;
 1439              		.loc 1 593 0
 1440 0992 97F8EF30 		ldrb	r3, [r7, #239]
 1441 0996 0833     		adds	r3, r3, #8
 1442 0998 87F8EF30 		strb	r3, [r7, #239]
 594:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1443              		.loc 1 594 0
 1444 099c 00BF     		nop
 1445              	.L72:
 595:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     }
 596:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     next_size = temp_8b & RH3_6LOTH_SIZE_MASK;
 1446              		.loc 1 596 0
 1447 099e 97F8ED30 		ldrb	r3, [r7, #237]
 1448 09a2 03F01F03 		and	r3, r3, #31
 1449 09a6 87F8E930 		strb	r3, [r7, #233]
 597:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_tossHeader(msg,hlen);
 1450              		.loc 1 597 0
 1451 09aa 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1452 09ae F868     		ldr	r0, [r7, #12]
 1453 09b0 1946     		mov	r1, r3
 1454 09b2 FFF7FEFF 		bl	packetfunctions_tossHeader
 598:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     if (next_size>0){
 1455              		.loc 1 598 0
 1456 09b6 97F8E930 		ldrb	r3, [r7, #233]	@ zero_extendqisi2
 1457 09ba 002B     		cmp	r3, #0
 1458 09bc 16D0     		beq	.L78
 599:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         next_size -= 1;
 1459              		.loc 1 599 0
 1460 09be 97F8E930 		ldrb	r3, [r7, #233]
 1461 09c2 013B     		subs	r3, r3, #1
 1462 09c4 87F8E930 		strb	r3, [r7, #233]
 600:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,2);
 1463              		.loc 1 600 0
 1464 09c8 F868     		ldr	r0, [r7, #12]
 1465 09ca 0221     		movs	r1, #2
 1466 09cc FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 601:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         msg->payload[0] = CRITICAL_6LORH | next_size;
 1467              		.loc 1 601 0
 1468 09d0 FB68     		ldr	r3, [r7, #12]
 1469 09d2 5B68     		ldr	r3, [r3, #4]
 1470 09d4 97F8E920 		ldrb	r2, [r7, #233]
 1471 09d8 62F07F02 		orn	r2, r2, #127
 1472 09dc D2B2     		uxtb	r2, r2
 1473 09de 1A70     		strb	r2, [r3]
 602:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         msg->payload[1] = next_type;
 1474              		.loc 1 602 0
 1475 09e0 FB68     		ldr	r3, [r7, #12]
 1476 09e2 5B68     		ldr	r3, [r3, #4]
 1477 09e4 0133     		adds	r3, r3, #1
 1478 09e6 97F8EA20 		ldrb	r2, [r7, #234]
 1479 09ea 1A70     		strb	r2, [r3]
 1480              	.L78:
 603:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     }
 604:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     // add first address
 605:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     switch(type){
 1481              		.loc 1 605 0
 1482 09ec 97F8EC30 		ldrb	r3, [r7, #236]	@ zero_extendqisi2
 1483 09f0 042B     		cmp	r3, #4
 1484 09f2 53D8     		bhi	.L79
 1485 09f4 01A2     		adr	r2, .L81
 1486 09f6 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1487 09fa 00BF     		.p2align 2
 1488              	.L81:
 1489 09fc 110A0000 		.word	.L80+1
 1490 0a00 250A0000 		.word	.L82+1
 1491 0a04 430A0000 		.word	.L83+1
 1492 0a08 610A0000 		.word	.L84+1
 1493 0a0c 7F0A0000 		.word	.L85+1
 1494              		.p2align 1
 1495              	.L80:
 606:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_0:
 607:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,1);
 1496              		.loc 1 607 0
 1497 0a10 F868     		ldr	r0, [r7, #12]
 1498 0a12 0121     		movs	r1, #1
 1499 0a14 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 608:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         msg->payload[0] = firstAddr.addr_128b[15];
 1500              		.loc 1 608 0
 1501 0a18 FB68     		ldr	r3, [r7, #12]
 1502 0a1a 5B68     		ldr	r3, [r3, #4]
 1503 0a1c 97F8E020 		ldrb	r2, [r7, #224]	@ zero_extendqisi2
 1504 0a20 1A70     		strb	r2, [r3]
 609:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1505              		.loc 1 609 0
 1506 0a22 3BE0     		b	.L79
 1507              	.L82:
 610:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_1:
 611:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,2);
 1508              		.loc 1 611 0
 1509 0a24 F868     		ldr	r0, [r7, #12]
 1510 0a26 0221     		movs	r1, #2
 1511 0a28 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 612:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&msg->payload[0],&firstAddr.addr_128b[14],2);
 1512              		.loc 1 612 0
 1513 0a2c FB68     		ldr	r3, [r7, #12]
 1514 0a2e 5A68     		ldr	r2, [r3, #4]
 1515 0a30 07F1D003 		add	r3, r7, #208
 1516 0a34 0F33     		adds	r3, r3, #15
 1517 0a36 1046     		mov	r0, r2
 1518 0a38 1946     		mov	r1, r3
 1519 0a3a 0222     		movs	r2, #2
 1520 0a3c FFF7FEFF 		bl	memcpy
 613:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1521              		.loc 1 613 0
 1522 0a40 2CE0     		b	.L79
 1523              	.L83:
 614:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_2:
 615:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,4);
 1524              		.loc 1 615 0
 1525 0a42 F868     		ldr	r0, [r7, #12]
 1526 0a44 0421     		movs	r1, #4
 1527 0a46 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 616:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&msg->payload[0],&firstAddr.addr_128b[12],4);
 1528              		.loc 1 616 0
 1529 0a4a FB68     		ldr	r3, [r7, #12]
 1530 0a4c 5A68     		ldr	r2, [r3, #4]
 1531 0a4e 07F1D003 		add	r3, r7, #208
 1532 0a52 0D33     		adds	r3, r3, #13
 1533 0a54 1046     		mov	r0, r2
 1534 0a56 1946     		mov	r1, r3
 1535 0a58 0422     		movs	r2, #4
 1536 0a5a FFF7FEFF 		bl	memcpy
 617:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1537              		.loc 1 617 0
 1538 0a5e 1DE0     		b	.L79
 1539              	.L84:
 618:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_3:
 619:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,8);
 1540              		.loc 1 619 0
 1541 0a60 F868     		ldr	r0, [r7, #12]
 1542 0a62 0821     		movs	r1, #8
 1543 0a64 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 620:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&msg->payload[0],&firstAddr.addr_128b[8],8);
 1544              		.loc 1 620 0
 1545 0a68 FB68     		ldr	r3, [r7, #12]
 1546 0a6a 5A68     		ldr	r2, [r3, #4]
 1547 0a6c 07F1D003 		add	r3, r7, #208
 1548 0a70 0933     		adds	r3, r3, #9
 1549 0a72 1046     		mov	r0, r2
 1550 0a74 1946     		mov	r1, r3
 1551 0a76 0822     		movs	r2, #8
 1552 0a78 FFF7FEFF 		bl	memcpy
 621:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1553              		.loc 1 621 0
 1554 0a7c 0EE0     		b	.L79
 1555              	.L85:
 622:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     case RH3_6LOTH_TYPE_4:
 623:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         packetfunctions_reserveHeaderSize(msg,16);
 1556              		.loc 1 623 0
 1557 0a7e F868     		ldr	r0, [r7, #12]
 1558 0a80 1021     		movs	r1, #16
 1559 0a82 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 624:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         memcpy(&msg->payload[0],&firstAddr.addr_128b[0],16);
 1560              		.loc 1 624 0
 1561 0a86 FB68     		ldr	r3, [r7, #12]
 1562 0a88 5A68     		ldr	r2, [r3, #4]
 1563 0a8a 07F1D003 		add	r3, r7, #208
 1564 0a8e 0133     		adds	r3, r3, #1
 1565 0a90 1046     		mov	r0, r2
 1566 0a92 1946     		mov	r1, r3
 1567 0a94 1022     		movs	r2, #16
 1568 0a96 FFF7FEFF 		bl	memcpy
 625:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         break;
 1569              		.loc 1 625 0
 1570 0a9a 00BF     		nop
 1571              	.L79:
 626:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     }
 627:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_reserveHeaderSize(msg,2);
 1572              		.loc 1 627 0
 1573 0a9c F868     		ldr	r0, [r7, #12]
 1574 0a9e 0221     		movs	r1, #2
 1575 0aa0 FFF7FEFF 		bl	packetfunctions_reserveHeaderSize
 628:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     msg->payload[0] = CRITICAL_6LORH | 0;
 1576              		.loc 1 628 0
 1577 0aa4 FB68     		ldr	r3, [r7, #12]
 1578 0aa6 5B68     		ldr	r3, [r3, #4]
 1579 0aa8 8022     		movs	r2, #128
 1580 0aaa 1A70     		strb	r2, [r3]
 629:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     msg->payload[1] = type;
 1581              		.loc 1 629 0
 1582 0aac FB68     		ldr	r3, [r7, #12]
 1583 0aae 5B68     		ldr	r3, [r3, #4]
 1584 0ab0 0133     		adds	r3, r3, #1
 1585 0ab2 97F8EC20 		ldrb	r2, [r7, #236]
 1586 0ab6 1A70     		strb	r2, [r3]
 630:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_ip128bToMac64b(
 1587              		.loc 1 630 0
 1588 0ab8 FB68     		ldr	r3, [r7, #12]
 1589 0aba 3833     		adds	r3, r3, #56
 1590 0abc 07F1D001 		add	r1, r7, #208
 1591 0ac0 07F1A802 		add	r2, r7, #168
 1592 0ac4 0846     		mov	r0, r1
 1593 0ac6 1146     		mov	r1, r2
 1594 0ac8 1A46     		mov	r2, r3
 1595 0aca FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 550:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     packetfunctions_tossHeader(msg,hlen);
 1596              		.loc 1 550 0
 1597 0ace 12E0     		b	.L61
 1598              	.L62:
 631:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &firstAddr,
 632:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &temp_prefix,
 633:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                         &msg->l2_nextORpreviousHop
 634:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     );
 635:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 }
 636:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             } else {
 637:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 // there is no next RH3-6loRH, remove current one
 638:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 packetfunctions_tossHeader(msg,hlen);
 1599              		.loc 1 638 0
 1600 0ad0 97F8EF30 		ldrb	r3, [r7, #239]	@ zero_extendqisi2
 1601 0ad4 F868     		ldr	r0, [r7, #12]
 1602 0ad6 1946     		mov	r1, r3
 1603 0ad8 FFF7FEFF 		bl	packetfunctions_tossHeader
 639:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 packetfunctions_ip128bToMac64b(
 1604              		.loc 1 639 0
 1605 0adc FB68     		ldr	r3, [r7, #12]
 1606 0ade 03F11501 		add	r1, r3, #21
 1607 0ae2 FB68     		ldr	r3, [r7, #12]
 1608 0ae4 3833     		adds	r3, r3, #56
 1609 0ae6 07F1A802 		add	r2, r7, #168
 1610 0aea 0846     		mov	r0, r1
 1611 0aec 1146     		mov	r1, r2
 1612 0aee 1A46     		mov	r2, r3
 1613 0af0 FFF7FEFF 		bl	packetfunctions_ip128bToMac64b
 510:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // there are at least 2 entries in the header, 
 1614              		.loc 1 510 0
 1615 0af4 08E0     		b	.L86
 1616              	.L61:
 510:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // there are at least 2 entries in the header, 
 1617              		.loc 1 510 0 is_stmt 0 discriminator 1
 1618 0af6 07E0     		b	.L86
 1619              	.L52:
 640:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     &msg->l3_destinationAdd,
 641:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     &temp_prefix,
 642:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                     &msg->l2_nextORpreviousHop
 643:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 );
 644:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             }
 645:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 646:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 647:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // log error
 648:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         openserial_printError(
 649:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             COMPONENT_IPHC,
 650:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             ERR_6LOWPAN_UNSUPPORTED,
 651:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             (errorparameter_t)16,
 652:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             (errorparameter_t)(temp_addr64.addr_64b[7])
 1620              		.loc 1 652 0 is_stmt 1
 1621 0af8 97F89C30 		ldrb	r3, [r7, #156]	@ zero_extendqisi2
 648:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             COMPONENT_IPHC,
 1622              		.loc 1 648 0
 1623 0afc 9BB2     		uxth	r3, r3
 1624 0afe 1120     		movs	r0, #17
 1625 0b00 0C21     		movs	r1, #12
 1626 0b02 1022     		movs	r2, #16
 1627 0b04 FFF7FEFF 		bl	openserial_printError
 1628              	.L86:
 653:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         );
 654:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 655:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // copy RH3s before toss them
 656:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (
 657:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->src.type != ADDR_NONE &&
 1629              		.loc 1 657 0
 1630 0b08 BB68     		ldr	r3, [r7, #8]
 1631 0b0a 5B7F     		ldrb	r3, [r3, #29]	@ zero_extendqisi2
 656:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->src.type != ADDR_NONE &&
 1632              		.loc 1 656 0
 1633 0b0c 002B     		cmp	r3, #0
 1634 0b0e 6CD0     		beq	.L87
 658:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->hopByhop_option != NULL
 1635              		.loc 1 658 0
 1636 0b10 BB68     		ldr	r3, [r7, #8]
 1637 0b12 9B69     		ldr	r3, [r3, #24]
 657:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header->hopByhop_option != NULL
 1638              		.loc 1 657 0
 1639 0b14 002B     		cmp	r3, #0
 1640 0b16 68D0     		beq	.L87
 1641              	.LBB2:
 659:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     ){
 660:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // check the length of RH3s
 661:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         RH3_length = ipv6_outer_header->hopByhop_option-msg->payload;
 1642              		.loc 1 661 0
 1643 0b18 BB68     		ldr	r3, [r7, #8]
 1644 0b1a 9B69     		ldr	r3, [r3, #24]
 1645 0b1c 1A46     		mov	r2, r3
 1646 0b1e FB68     		ldr	r3, [r7, #12]
 1647 0b20 5B68     		ldr	r3, [r3, #4]
 1648 0b22 D31A     		subs	r3, r2, r3
 1649 0b24 87F8EE30 		strb	r3, [r7, #238]
 662:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         memcpy(&RH3_copy[0],msg->payload,RH3_length);
 1650              		.loc 1 662 0
 1651 0b28 FB68     		ldr	r3, [r7, #12]
 1652 0b2a 5A68     		ldr	r2, [r3, #4]
 1653 0b2c 97F8EE30 		ldrb	r3, [r7, #238]	@ zero_extendqisi2
 1654 0b30 07F11401 		add	r1, r7, #20
 1655 0b34 0846     		mov	r0, r1
 1656 0b36 1146     		mov	r1, r2
 1657 0b38 1A46     		mov	r2, r3
 1658 0b3a FFF7FEFF 		bl	memcpy
 663:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_tossHeader(msg,RH3_length);
 1659              		.loc 1 663 0
 1660 0b3e 97F8EE30 		ldrb	r3, [r7, #238]	@ zero_extendqisi2
 1661 0b42 F868     		ldr	r0, [r7, #12]
 1662 0b44 1946     		mov	r1, r3
 1663 0b46 FFF7FEFF 		bl	packetfunctions_tossHeader
 664:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         
 665:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // retrieve hop-by-hop header (includes RPL option)
 666:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         rpi_length = iphc_retrieveIPv6HopByHopHeader(
 1664              		.loc 1 666 0
 1665 0b4a F868     		ldr	r0, [r7, #12]
 1666 0b4c 3968     		ldr	r1, [r7]
 1667 0b4e FFF7FEFF 		bl	iphc_retrieveIPv6HopByHopHeader
 1668 0b52 0346     		mov	r3, r0
 1669 0b54 87F8E830 		strb	r3, [r7, #232]
 667:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                           msg,
 668:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                           rpl_option
 669:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                      );
 670:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****      
 671:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // toss the headers
 672:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_tossHeader(
 1670              		.loc 1 672 0
 1671 0b58 97F8E830 		ldrb	r3, [r7, #232]	@ zero_extendqisi2
 1672 0b5c F868     		ldr	r0, [r7, #12]
 1673 0b5e 1946     		mov	r1, r3
 1674 0b60 FFF7FEFF 		bl	packetfunctions_tossHeader
 673:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             msg,
 674:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             rpi_length
 675:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         );
 676:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****       
 677:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         flags = rpl_option->flags;
 1675              		.loc 1 677 0
 1676 0b64 3B68     		ldr	r3, [r7]
 1677 0b66 5B78     		ldrb	r3, [r3, #1]
 1678 0b68 87F8E730 		strb	r3, [r7, #231]
 678:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         senderRank = rpl_option->senderRank;
 1679              		.loc 1 678 0
 1680 0b6c 3B68     		ldr	r3, [r7]
 1681 0b6e DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1682 0b70 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1683 0b72 1B02     		lsls	r3, r3, #8
 1684 0b74 1343     		orrs	r3, r3, r2
 1685 0b76 A7F8E430 		strh	r3, [r7, #228]	@ movhi
 679:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if ((flags & O_FLAG)!=O_FLAG){
 1686              		.loc 1 679 0
 1687 0b7a 97F8E730 		ldrb	r3, [r7, #231]	@ zero_extendqisi2
 1688 0b7e 03F01003 		and	r3, r3, #16
 1689 0b82 002B     		cmp	r3, #0
 1690 0b84 08D1     		bne	.L88
 680:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // wrong direction
 681:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // log error
 682:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openserial_printError(
 1691              		.loc 1 682 0
 1692 0b86 97F8E730 		ldrb	r3, [r7, #231]	@ zero_extendqisi2
 1693 0b8a 9AB2     		uxth	r2, r3
 1694 0b8c B7F8E430 		ldrh	r3, [r7, #228]
 1695 0b90 1220     		movs	r0, #18
 1696 0b92 1321     		movs	r1, #19
 1697 0b94 FFF7FEFF 		bl	openserial_printError
 1698              	.L88:
 683:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 COMPONENT_FORWARDING,
 684:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 ERR_WRONG_DIRECTION,
 685:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t)flags,
 686:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t)senderRank
 687:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             );
 688:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 689:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         if (senderRank > neighbors_getMyDAGrank()){
 1699              		.loc 1 689 0
 1700 0b98 FFF7FEFF 		bl	neighbors_getMyDAGrank
 1701 0b9c 0346     		mov	r3, r0
 1702 0b9e 1A46     		mov	r2, r3
 1703 0ba0 B7F8E430 		ldrh	r3, [r7, #228]
 1704 0ba4 9342     		cmp	r3, r2
 1705 0ba6 12D9     		bls	.L89
 690:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // loop detected
 691:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // set flag
 692:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             rpl_option->flags |= R_FLAG;
 1706              		.loc 1 692 0
 1707 0ba8 3B68     		ldr	r3, [r7]
 1708 0baa 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1709 0bac 43F00803 		orr	r3, r3, #8
 1710 0bb0 DAB2     		uxtb	r2, r3
 1711 0bb2 3B68     		ldr	r3, [r7]
 1712 0bb4 5A70     		strb	r2, [r3, #1]
 693:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             // log error
 694:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             openserial_printError(
 1713              		.loc 1 694 0
 1714 0bb6 FFF7FEFF 		bl	neighbors_getMyDAGrank
 1715 0bba 0346     		mov	r3, r0
 1716 0bbc 1C46     		mov	r4, r3
 1717 0bbe B7F8E430 		ldrh	r3, [r7, #228]
 1718 0bc2 1220     		movs	r0, #18
 1719 0bc4 1221     		movs	r1, #18
 1720 0bc6 1A46     		mov	r2, r3
 1721 0bc8 2346     		mov	r3, r4
 1722 0bca FFF7FEFF 		bl	openserial_printError
 1723              	.L89:
 695:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 COMPONENT_FORWARDING,
 696:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 ERR_LOOP_DETECTED,
 697:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t) senderRank,
 698:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****                 (errorparameter_t) neighbors_getMyDAGrank()
 699:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****             );
 700:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         }
 701:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         forwarding_createRplOption(rpl_option, rpl_option->flags);
 1724              		.loc 1 701 0
 1725 0bce 3B68     		ldr	r3, [r7]
 1726 0bd0 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1727 0bd2 3868     		ldr	r0, [r7]
 1728 0bd4 1946     		mov	r1, r3
 1729 0bd6 FFF7FEFF 		bl	forwarding_createRplOption
 702:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // toss the IP in IP 6LoRH
 703:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         packetfunctions_tossHeader(msg, ipv6_outer_header->header_length);
 1730              		.loc 1 703 0
 1731 0bda BB68     		ldr	r3, [r7, #8]
 1732 0bdc 93F83F30 		ldrb	r3, [r3, #63]	@ zero_extendqisi2
 1733 0be0 F868     		ldr	r0, [r7, #12]
 1734 0be2 1946     		mov	r1, r3
 1735 0be4 FFF7FEFF 		bl	packetfunctions_tossHeader
 1736              	.LBE2:
 659:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         // check the length of RH3s
 1737              		.loc 1 659 0
 1738 0be8 02E0     		b	.L90
 1739              	.L87:
 704:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 705:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         RH3_length = 0;
 1740              		.loc 1 705 0
 1741 0bea 0023     		movs	r3, #0
 1742 0bec 87F8EE30 		strb	r3, [r7, #238]
 1743              	.L90:
 706:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 707:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 708:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     // send to next lower layer
 709:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     return iphc_sendFromForwarding(
 1744              		.loc 1 709 0
 1745 0bf0 BB68     		ldr	r3, [r7, #8]
 1746 0bf2 0433     		adds	r3, r3, #4
 1747 0bf4 0093     		str	r3, [sp]
 1748 0bf6 07F11403 		add	r3, r7, #20
 1749 0bfa 0193     		str	r3, [sp, #4]
 1750 0bfc 97F8EE30 		ldrb	r3, [r7, #238]	@ zero_extendqisi2
 1751 0c00 0293     		str	r3, [sp, #8]
 1752 0c02 0123     		movs	r3, #1
 1753 0c04 0393     		str	r3, [sp, #12]
 1754 0c06 F868     		ldr	r0, [r7, #12]
 1755 0c08 B968     		ldr	r1, [r7, #8]
 1756 0c0a 7A68     		ldr	r2, [r7, #4]
 1757 0c0c 3B68     		ldr	r3, [r7]
 1758 0c0e FFF7FEFF 		bl	iphc_sendFromForwarding
 1759 0c12 0346     		mov	r3, r0
 710:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         msg,
 711:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_outer_header,
 712:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         ipv6_inner_header,
 713:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         rpl_option,
 714:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &ipv6_outer_header->flow_label,
 715:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         &RH3_copy[0],
 716:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         RH3_length,
 717:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         PCKTFORWARD
 718:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     );
 719:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 1760              		.loc 1 719 0
 1761 0c14 1846     		mov	r0, r3
 1762 0c16 F037     		adds	r7, r7, #240
 1763              		.cfi_def_cfa_offset 16
 1764 0c18 BD46     		mov	sp, r7
 1765              		.cfi_def_cfa_register 13
 1766              		@ sp needed
 1767 0c1a B0BD     		pop	{r4, r5, r7, pc}
 1768              		.cfi_endproc
 1769              	.LFE6:
 1771              		.align	2
 1772              		.global	forwarding_createRplOption
 1773              		.thumb
 1774              		.thumb_func
 1776              	forwarding_createRplOption:
 1777              	.LFB7:
 720:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 721:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 722:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** /**
 723:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \brief Create a RPL option.
 724:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** 
 725:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[out] rpl_option A pointer to the structure to fill in.
 726:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** \param[in]  flags      The flags to indicate in the RPL option.
 727:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** */
 728:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** void forwarding_createRplOption(rpl_option_ht* rpl_option, uint8_t flags) {
 1778              		.loc 1 728 0
 1779              		.cfi_startproc
 1780              		@ args = 0, pretend = 0, frame = 16
 1781              		@ frame_needed = 1, uses_anonymous_args = 0
 1782 0c1c 80B5     		push	{r7, lr}
 1783              		.cfi_def_cfa_offset 8
 1784              		.cfi_offset 7, -8
 1785              		.cfi_offset 14, -4
 1786 0c1e 84B0     		sub	sp, sp, #16
 1787              		.cfi_def_cfa_offset 24
 1788 0c20 00AF     		add	r7, sp, #0
 1789              		.cfi_def_cfa_register 7
 1790 0c22 7860     		str	r0, [r7, #4]
 1791 0c24 0B46     		mov	r3, r1
 1792 0c26 FB70     		strb	r3, [r7, #3]
 729:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     uint8_t I,K;
 730:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option->optionType         = RPL_HOPBYHOP_HEADER_OPTION_TYPE;
 1793              		.loc 1 730 0
 1794 0c28 7B68     		ldr	r3, [r7, #4]
 1795 0c2a 6322     		movs	r2, #99
 1796 0c2c 1A70     		strb	r2, [r3]
 731:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option->rplInstanceID      = icmpv6rpl_getRPLIntanceID();
 1797              		.loc 1 731 0
 1798 0c2e FFF7FEFF 		bl	icmpv6rpl_getRPLIntanceID
 1799 0c32 0346     		mov	r3, r0
 1800 0c34 1A46     		mov	r2, r3
 1801 0c36 7B68     		ldr	r3, [r7, #4]
 1802 0c38 9A70     		strb	r2, [r3, #2]
 732:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option->senderRank         = neighbors_getMyDAGrank();
 1803              		.loc 1 732 0
 1804 0c3a FFF7FEFF 		bl	neighbors_getMyDAGrank
 1805 0c3e 0346     		mov	r3, r0
 1806 0c40 1A46     		mov	r2, r3
 1807 0c42 7B68     		ldr	r3, [r7, #4]
 1808 0c44 A3F80320 		strh	r2, [r3, #3]	@ unaligned
 733:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****    
 734:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if (rpl_option->rplInstanceID == 0){
 1809              		.loc 1 734 0
 1810 0c48 7B68     		ldr	r3, [r7, #4]
 1811 0c4a 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 1812 0c4c 002B     		cmp	r3, #0
 1813 0c4e 02D1     		bne	.L93
 735:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****        I = 1;
 1814              		.loc 1 735 0
 1815 0c50 0123     		movs	r3, #1
 1816 0c52 FB73     		strb	r3, [r7, #15]
 1817 0c54 01E0     		b	.L94
 1818              	.L93:
 736:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 737:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****        I = 0;
 1819              		.loc 1 737 0
 1820 0c56 0023     		movs	r3, #0
 1821 0c58 FB73     		strb	r3, [r7, #15]
 1822              	.L94:
 738:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 739:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 740:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     if ((rpl_option->senderRank & 0x00FF) == 0){
 1823              		.loc 1 740 0
 1824 0c5a 7B68     		ldr	r3, [r7, #4]
 1825 0c5c B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 1826 0c60 9BB2     		uxth	r3, r3
 1827 0c62 DBB2     		uxtb	r3, r3
 1828 0c64 002B     		cmp	r3, #0
 1829 0c66 02D1     		bne	.L95
 741:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         K = 1;
 1830              		.loc 1 741 0
 1831 0c68 0123     		movs	r3, #1
 1832 0c6a BB73     		strb	r3, [r7, #14]
 1833 0c6c 01E0     		b	.L96
 1834              	.L95:
 742:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     } else {
 743:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****         K = 0;
 1835              		.loc 1 743 0
 1836 0c6e 0023     		movs	r3, #0
 1837 0c70 BB73     		strb	r3, [r7, #14]
 1838              	.L96:
 744:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     }
 745:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     
 746:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c ****     rpl_option->flags = (flags & ~I_FLAG & ~K_FLAG) | (I<<1) | K;
 1839              		.loc 1 746 0
 1840 0c72 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1841 0c74 23F00303 		bic	r3, r3, #3
 1842 0c78 DAB2     		uxtb	r2, r3
 1843 0c7a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1844 0c7c 5B00     		lsls	r3, r3, #1
 1845 0c7e DBB2     		uxtb	r3, r3
 1846 0c80 1343     		orrs	r3, r3, r2
 1847 0c82 DAB2     		uxtb	r2, r3
 1848 0c84 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 1849 0c86 1343     		orrs	r3, r3, r2
 1850 0c88 DBB2     		uxtb	r3, r3
 1851 0c8a DAB2     		uxtb	r2, r3
 1852 0c8c 7B68     		ldr	r3, [r7, #4]
 1853 0c8e 5A70     		strb	r2, [r3, #1]
 747:build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.c **** }
 1854              		.loc 1 747 0
 1855 0c90 1037     		adds	r7, r7, #16
 1856              		.cfi_def_cfa_offset 8
 1857 0c92 BD46     		mov	sp, r7
 1858              		.cfi_def_cfa_register 13
 1859              		@ sp needed
 1860 0c94 80BD     		pop	{r7, pc}
 1861              		.cfi_endproc
 1862              	.LFE7:
 1864              	.Letext0:
 1865              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 1866              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 1867              		.file 4 "inc/opendefs.h"
 1868              		.file 5 "openstack/03a-IPHC/iphc.h"
 1869              		.file 6 "build/OpenMote-CC2538_armgcc/openstack/03b-IPv6/forwarding.h"
 1870              		.file 7 "bsp/boards/OpenMote-CC2538/board_info.h"
 1871              		.file 8 "openstack/03b-IPv6/icmpv6rpl.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 forwarding.c
     /tmp/ccaF3kiz.s:19     .rodata:0000000000000000 $d
     /tmp/ccaF3kiz.s:22     .rodata:0000000000000000 rreg_uriquery
     /tmp/ccaF3kiz.s:27     .rodata:0000000000000008 infoBoardname
     /tmp/ccaF3kiz.s:32     .rodata:0000000000000010 infouCName
     /tmp/ccaF3kiz.s:37     .rodata:0000000000000018 infoRadioName
     /tmp/ccaF3kiz.s:42     .rodata:0000000000000024 infoStackName
     /tmp/ccaF3kiz.s:47     .rodata:0000000000000030 all_routers_multicast
     /tmp/ccaF3kiz.s:65     .text:0000000000000000 $t
     /tmp/ccaF3kiz.s:70     .text:0000000000000000 forwarding_init
     /tmp/ccaF3kiz.s:99     .text:000000000000000c forwarding_send
     /tmp/ccaF3kiz.s:1776   .text:0000000000000c1c forwarding_createRplOption
     /tmp/ccaF3kiz.s:783    .text:000000000000047c forwarding_send_internal_RoutingTable
     /tmp/ccaF3kiz.s:348    .text:0000000000000200 forwarding_sendDone
     /tmp/ccaF3kiz.s:447    .text:000000000000027c forwarding_receive
     /tmp/ccaF3kiz.s:868    .text:00000000000004f4 forwarding_send_internal_SourceRouting
     /tmp/ccaF3kiz.s:702    .text:0000000000000418 forwarding_getNextHop
     /tmp/ccaF3kiz.s:977    .text:00000000000005bc $d
     /tmp/ccaF3kiz.s:982    .text:00000000000005d0 $t
     /tmp/ccaF3kiz.s:1151   .text:0000000000000740 $d
     /tmp/ccaF3kiz.s:1156   .text:0000000000000754 $t
     /tmp/ccaF3kiz.s:1280   .text:000000000000084c $d
     /tmp/ccaF3kiz.s:1285   .text:0000000000000860 $t
     /tmp/ccaF3kiz.s:1372   .text:0000000000000900 $d
     /tmp/ccaF3kiz.s:1376   .text:0000000000000910 $t
     /tmp/ccaF3kiz.s:1489   .text:00000000000009fc $d
     /tmp/ccaF3kiz.s:1494   .text:0000000000000a10 $t
                     .debug_frame:0000000000000010 $d
                           .group:0000000000000000 wm4.0.59116071098782a37a9183a8102fe91b
                           .group:0000000000000000 wm4.features.h.22.2e382148a0560adabf236cddd4e880f4
                           .group:0000000000000000 wm4._default_types.h.15.933e8edd27a65e0b69af4a865eb623d2
                           .group:0000000000000000 wm4._intsup.h.10.35a45952db64d30146faa63a55c20c1c
                           .group:0000000000000000 wm4._stdint.h.10.f76354baea1c7088202064e6f3d4f5e3
                           .group:0000000000000000 wm4.stdint.h.23.373a9d32a9e4c2e88fd347156532d281
                           .group:0000000000000000 wm4.toolchain_defs.h.2.e4ebbe6e0a48032a9b79077dc42e1ffd
                           .group:0000000000000000 wm4.newlib.h.8.2702bca278809460f0af6fba1d84eb68
                           .group:0000000000000000 wm4.config.h.220.a09b0b0de3c25be3f39d71990e617bff
                           .group:0000000000000000 wm4._ansi.h.23.84af8eb8cd468d25cc5f45f5eb13ec51
                           .group:0000000000000000 wm4.stddef.h.39.daafd3d79fe2f3a84d2d73d7d4e706f8
                           .group:0000000000000000 wm4.lock.h.2.9bc98482741e5e2a9450b12934a684ea
                           .group:0000000000000000 wm4._types.h.54.d3d34a3b7f3cc230cd159baf022b4b08
                           .group:0000000000000000 wm4.stddef.h.158.61317cdbfb4026324507d123a50b0fd6
                           .group:0000000000000000 wm4.reent.h.17.8bd9e4098e0428508c282cad794fae43
                           .group:0000000000000000 wm4.cdefs.h.47.e6563c1c3863188ba4ac4eaa2c85b6f1
                           .group:0000000000000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:0000000000000000 wm4.stddef.h.158.a7efb00f6cbc6f43213b50e183c9830c
                           .group:0000000000000000 wm4.stdbool.h.29.1c9ee6859ce8145f7838a4f2549ccec2
                           .group:0000000000000000 wm4.hw_types.h.67.b10589a0806dcc2d274d6fab6b736519
                           .group:0000000000000000 wm4.interrupt.h.41.272fc4ec0e276feb439e7974d0f77eaf
                           .group:0000000000000000 wm4.board_info.h.22.aeb00002354a4949fff54190040e37af
                           .group:0000000000000000 wm4.opendefs.h.23.bdaf9c024be66ead04de21e3ce3dfaf2
                           .group:0000000000000000 wm4.iphc.h.2.9e7d9d56ac728a3c0b3014283a59854e
                           .group:0000000000000000 wm4.openserial.h.8.a9fe077ce3323e4f6730d3ecdff542cc
                           .group:0000000000000000 wm4.idmanager.h.2.8c0e2159b32ef3125cbb1e984805cbfe
                           .group:0000000000000000 wm4.opentimers.h.8.044f2d040a134cdb0ddb58adfc2508be
                           .group:0000000000000000 wm4.icmpv6rpl.h.15.0573bca2230f8b0d62a096dd795549d0
                           .group:0000000000000000 wm4.neighbors.h.15.9f35f180a0332d1bc442efb0ec51905c
                           .group:0000000000000000 wm4.scheduler.h.2.d8d85f436d0d4b3991926a15b8490cf4

UNDEFINED SYMBOLS
idmanager_getMyID
memcpy
memset
packetfunctions_ip128bToMac64b
packetfunctions_sameAddress
packetfunctions_isBroadcastMulticast
iphc_prependIPv6Header
openqueue_freePacketBuffer
opentcp_sendDone
openudp_sendDone
icmpv6_sendDone
openserial_printCritical
idmanager_isMyAddress
packetfunctions_tossHeader
opentcp_receive
openudp_receive
icmpv6_receive
openserial_printError
neighbors_getMyDAGrank
neighbors_isStableNeighbor
neighbors_getPreferredParentEui64
iphc_sendFromForwarding
icmpv6rpl_getRPLDODAGid
packetfunctions_reserveHeaderSize
iphc_retrieveIPv6HopByHopHeader
icmpv6rpl_getRPLIntanceID
